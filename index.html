<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Production Plan (Multi-Restaurant) - Luxury Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
    <style>
        body {
            font-family: 'Kanit', sans-serif;
            background-color: #000000; /* Deep black for luxury */
            color: #e5e7eb; 
        }
        .header-gradient {
            background: linear-gradient(145deg, #1f1f1f 0%, #000000 100%);
        }
        .restaurant-tab {
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }
        .restaurant-tab.active {
            color: #fbbf24;
            border-bottom-color: #fbbf24;
            background-color: #111827;
        }
        .shoot-day-badge {
            background-color: #fbbf24; /* Amber/Gold */
            color: #000000;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            position: relative;
            z-index: 10;
            cursor: pointer;
        }

        /* Glowing effect for shoot-day-badge */
        .shoot-day-badge::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background-color: #fbbf24;
            filter: blur(8px);
            border-radius: 0.25rem;
            opacity: 0.6;
            z-index: -1;
            transition: opacity 0.3s ease-in-out;
        }

        .shoot-day-badge:hover::before {
            opacity: 1;
            filter: blur(12px);
        }

        /* Popover for shoot day items */
        .shoot-day-badge-container {
            position: relative;
            display: inline-block;
        }

        .shoot-day-popover {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%) translateY(-10px);
            background-color: #1a1a1a;
            border: 1px solid #fbbf24;
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            color: #e5e7eb;
            font-size: 0.875rem;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease, transform 0.3s ease;
            z-index: 50;
            box-shadow: 0 4px 15px rgba(251, 191, 36, 0.2);
            min-width: 150px;
        }

        .shoot-day-popover::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%) translateY(-1px);
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-top: 8px solid #fbbf24;
            filter: drop-shadow(0 4px 2px rgba(251, 191, 36, 0.1));
        }

        .shoot-day-popover ul { list-style: none; padding: 0; margin: 0; }
        .shoot-day-popover li {
            padding: 0.25rem 0;
            border-bottom: 1px dashed #374151;
            cursor: pointer;
            transition: color 0.2s ease-in-out;
        }
        .shoot-day-popover li:hover { color: #fbbf24; }
        .shoot-day-popover li:last-child { border-bottom: none; }
        .shoot-day-badge-container:hover .shoot-day-popover,
        .shoot-day-popover.popover-visible {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(-20px);
        }

        .modal { transition: opacity 0.3s ease, visibility 0.3s ease; }
        .modal-content {
            transition: transform 0.3s ease;
            box-shadow: 0px 0px 50px rgba(251, 191, 36, 0.1);
        }

        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in-up { animation: fadeInUp 0.7s ease-out forwards; }
        .content-card {
            border: 2px solid #374151;
            box-shadow: 8px 8px 0px #111827;
        }
        .content-card:hover {
           transform: translate(2px, 2px);
           box-shadow: 4px 4px 0px #fbbf24;
           border-color: #fbbf24;
        }
    </style>
</head>
<body class="text-gray-200">

    <header class="header-gradient text-white p-6 sm:p-8 shadow-2xl text-center border-b-2 border-amber-500 fade-in-up">
        <h1 class="text-3xl sm:text-4xl md:text-5xl font-bold tracking-wide">Production Plan</h1>
        <p id="restaurant-name-header" class="text-lg sm:text-xl mt-2 font-light text-amber-400"></p>
    </header>

    <div class="bg-gray-900 border-b-2 border-gray-800 sticky top-0 z-40">
        <div id="restaurant-tabs" class="container mx-auto flex items-center justify-center overflow-x-auto">
            <!-- Tabs will be injected here -->
        </div>
    </div>

    <div class="container mx-auto p-4 sm:px-6 md:px-8 mt-8">
        <section id="shooting-summary" class="fade-in-up" style="animation-delay: 150ms;">
            <h2 class="text-2xl sm:text-3xl font-bold text-amber-400 mb-4 border-b-2 border-gray-800 pb-2 flex items-center space-x-3">
                <i data-lucide="clapperboard" class="w-7 h-7 sm:w-8 sm:h-8"></i>
                <span>สรุปวันถ่ายทำ (Shooting Schedule)</span>
            </h2>
            <div id="schedule-container" class="space-y-4"></div>
        </section>
    </div>

    <main class="container mx-auto p-4 sm:p-6 md:p-8">
        <div id="content-grid" class="space-y-16"></div>
    </main>

    <div id="detail-modal" class="modal fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-80 p-4 opacity-0 invisible">
        <div id="modal-content" class="modal-content bg-black border-2 border-amber-500 rounded-lg shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto transform scale-95">
            <div class="sticky top-0 bg-black bg-opacity-80 backdrop-blur-sm p-4 sm:p-5 border-b border-amber-500/50 flex justify-between items-center">
                <h2 id="modal-title" class="text-xl sm:text-2xl font-semibold text-amber-400"></h2>
                <button id="close-modal-btn" class="text-gray-400 hover:text-red-500 transition-colors">
                    <i data-lucide="x-circle" class="w-8 h-8"></i>
                </button>
            </div>
            <div id="modal-body" class="p-4 sm:p-6 space-y-5"></div>
        </div>
    </div>
    
    <div class="container mx-auto p-4 sm:px-6 md:px-8 mt-16">
        <section class="bg-gray-900 border-2 border-gray-700 rounded-lg p-6 flex flex-col sm:flex-row items-center justify-between gap-6 fade-in-up" style="animation-delay: 50ms;">
            <div class="flex-1">
                <h2 class="text-xl sm:text-2xl font-bold text-amber-400 mb-3">ผู้รับผิดชอบโครงการ</h2>
                <p class="text-lg font-semibold text-white">Frank Chetsarit</p>
                <p class="text-md text-gray-400">Graphic design NTK</p>
                <div class="mt-4 space-y-2 text-gray-300">
                    <p class="flex items-center space-x-2"><i data-lucide="phone" class="w-4 h-4 text-amber-400"></i><span>081-262-5455</span></p>
                    <p class="flex items-center space-x-2"><i data-lucide="message-square" class="w-4 h-4 text-amber-400"></i><span>Line ID: frankchetsarit</span></p>
                </div>
            </div>
            <div class="text-center">
                 <canvas id="qr-code" class="rounded-lg border-2 border-amber-500"></canvas>
                 <p class="mt-2 text-sm text-amber-400 font-semibold">สแกนเพื่อแชร์หน้านี้</p>
            </div>
        </section>
    </div>

    <footer class="mt-10 py-10 border-t border-gray-800">
        <div class="container mx-auto text-center text-gray-500 px-4">
            <p id="footer-restaurant-name" class="font-bold text-base sm:text-lg text-gray-400"></p>
            <p class="text-sm mt-1">Production & Content Calendar Management System</p>
            <p class="text-xs mt-2">&copy; 2025 All Rights Reserved.</p>
        </div>
    </footer>


    <script>
        const allRestaurantsData = {
            "ร้านลูกเจี๊ยบ หมูกระทะ": {
                weeks: [
                    {
                        weekNumber: 1, range: "1–7 ตุลาคม 2025", shootDate: "3 ตุลาคม 2025", theme: "อบอุ่น, ตลก, โปรโมต, โรแมนติก",
                        content: Array(7).fill({}).map((_, i) => ({ postDate: `${i + 1} ต.ค.`, title: `คอนเทนต์เปิดสัปดาห์ที่ 1 - วันที่ ${i+1}`, length: "0:30", details: "เนื่องจากไม่มีรายละเอียดสำหรับสัปดาห์ที่ 1 จึงใส่ข้อมูลตัวอย่างไว้ก่อน", mood: "รอรายละเอียด", filming: "รอรายละเอียด", equipment: "มือถือ, ไฟ LED", location: "ในร้าน", shootDate: "3 ต.ค.", notes: "โทนรวม: อบอุ่น, ตลก, โปรโมต, โรแมนติก" }))
                    },
                    {
                        weekNumber: 2, range: "8–14 ตุลาคม 2025", shootDate: "10 ตุลาคม 2025", theme: "ไวรัล, ครอบครัว, โปรโมชัน, เบื้องหลัง",
                        content: [ { postDate: "8 ต.ค.", title: "🍖 หมูเต้นบนเตา (ไวรัล)", length: "0:15", details: "0–3s หมูเด้งบนเตา / 3–7s เสียงพากย์ “อุ๊ย! ร้อนๆ เด้งใหญ่เลย!” / 7–15s zoom-in พร้อมข้อความ “หมูเด้งในตำนาน”", mood: "ตลก / เพลง remix funny", filming: "handheld close-up 240fps", equipment: "มือถือ, ไมค์พากย์, ไฟ LED", location: "เตากลางร้าน", shootDate: "10 ต.ค.", notes: "ไวรัลเสียงพากย์" }, { postDate: "9 ต.ค.", title: "👨‍👩‍👧 คืนแห่งครอบครัว", length: "0:45", details: "0–8s ครอบครัวเข้าร้าน / 8–15s เด็กหัวเราะ / 15–25s พ่อจ่ายเงิน / 25–40s แม่พูด “ถูกและอร่อย” / 40–45s โลโก้ร้าน", mood: "อบอุ่น / เพลง family acoustic", filming: "tripod / pan slow / wide shot", equipment: "มือถือ, ไฟ LED warm", location: "โต๊ะใหญ่กลางร้าน", shootDate: "10 ต.ค.", notes: "mood ครอบครัว" }, { postDate: "10 ต.ค.", title: "🧂 เบื้องหลัง “เตรียมหมู”", length: "0:60", details: "0–10s พนักงานหั่นหมู / 10–20s หมักซอส / 20–30s คลุกมือ / 30–45s วางถาดเรียง / 45–55s ซูมใกล้เนื้อ / 55–60s ตัวหนังสือ “ทุกจานคือความตั้งใจ”", mood: "documentary / เพลง soft beat", filming: "handheld / macro", equipment: "มือถือ, ไฟ LED, ถุงมือ, เขียง", location: "ครัวหลังร้าน", shootDate: "10 ต.ค.", notes: "เบื้องหลังจริง" }, { postDate: "11 ต.ค.", title: "💬 เสียงพากย์พนักงาน “ลูกค้าประจำ”", length: "0:30", details: "0–5s พนักงานพูด “เจอกันทุกศุกร์เลยนะคะ” / 5–15s ภาพลูกค้าหัวเราะ / 15–25s เตาย่างหมู / 25–30s ปิดด้วยโลโก้", mood: "เป็นกันเอง / เพลง chill pop", filming: "mid shot / talking head", equipment: "มือถือ, ไมค์ไร้สาย", location: "มุมพนักงานหน้าเคาน์เตอร์", shootDate: "10 ต.ค.", notes: "ใช้เสียงจริง" }, { postDate: "12 ต.ค.", title: "🐷 โปร “มากับเพื่อนลดอีก!”", length: "0:20", details: "0–4s ป้ายโปร / 4–10s เพื่อน 3 คน high five / 10–15s zoom ใบเสร็จ / 15–20s ตัวหนังสือ “ชวนเพื่อนมากินกัน!”", mood: "สนุก / เพลง upbeat", filming: "wide shot / handheld move", equipment: "มือถือ, ป้ายโปร", location: "หน้าร้าน", shootDate: "10 ต.ค.", notes: "โปรโมตวันอาทิตย์" }, { postDate: "13 ต.ค.", title: "🔥 สโลว์หมูไหม้ (Art shot)", length: "0:10", details: "0–3s หมูค่อยๆ เปลี่ยนสี / 3–6s ควันลอย / 6–10s fade to logo", mood: "ศิลป์ / เพลง ambient", filming: "slow motion macro", equipment: "มือถือ, ขาตั้ง", location: "เตากลางร้าน", shootDate: "10 ต.ค.", notes: "Visual filler" }, { postDate: "14 ต.ค.", title: "🪩 รวมช็อตบรรยากาศ 1 สัปดาห์", length: "0:60", details: "0–8s เปิดร้าน / 8–20s ลูกค้าแน่น / 20–35s ย่างหมู / 35–45s เสิร์ฟอาหาร / 45–55s เด็กหัวเราะ / 55–60s โลโก้ปิดท้าย", mood: "สดใส / เพลง EDM Chill", filming: "handheld / montage cut", equipment: "มือถือ, gimbal", location: "ทั่วร้าน", shootDate: "10 ต.ค.", notes: "คลิปสรุปสัปดาห์" } ]
                    },
                    {
                        weekNumber: 3, range: "15–21 ตุลาคม 2025", shootDate: "17 ตุลาคม 2025", theme: "เทศกาลกินเจ, ปลายเดือน, คุ้มค่า",
                        content: [ { postDate: "15 ต.ค.", title: "🧘‍♀️ หมูกระทะเจก็มีนะ", length: "0:45", details: "0–5s พนักงานโชว์ถาดผัก / 5–15s ผัดเต้าหู้ลงเตา / 15–25s เทน้ำซุป / 25–35s ลูกค้าพูด “เจก็อิ่มได้” / 35–45s โลโก้ร้าน “อิ่มบุญ อร่อยจริง”", mood: "อบอุ่น / เพลง light acoustic", filming: "tripod / macro shot / steady pan", equipment: "มือถือ, ไฟ LED, เต้าหู้, ผัก", location: "มุมครัวหลังร้าน", shootDate: "17 ต.ค.", notes: "เทศกาลกินเจ" }, { postDate: "16 ต.ค.", title: "😂 มีม “สายเนื้อแอบกินเจ”", length: "0:15", details: "0–3s เพื่อนแอบตักหมู / 3–10s ตาโตทำหน้าเจ็บใจ / 10–15s ข้อความ “รู้ไหมว่าเราเห็นนะ!”", mood: "ตลก / เพลง funny remix", filming: "handheld / close-up reaction", equipment: "มือถือ", location: "มุมโต๊ะซ้าย", shootDate: "17 ต.ค.", notes: "คลิปไวรัลสั้น" }, { postDate: "17 ต.ค.", title: "💬 รีวิวจริง “มากี่ครั้งก็ไม่เบื่อ”", length: "0:30", details: "0–8s ลูกค้าชายพูด “มาทุกอาทิตย์เลยครับ” / 8–15s ถ่ายบรรยากาศโต๊ะ / 15–25s zoom หน้าเตาย่าง / 25–30s โลโก้ + แคปชันรีวิว", mood: "น่าเชื่อถือ / เพลง soft pop", filming: "mid shot / handheld", equipment: "มือถือ, ไมค์ไร้สาย", location: "มุมลูกค้าประจำ", shootDate: "17 ต.ค.", notes: "รีวิวจากลูกค้าจริง" }, { postDate: "18 ต.ค.", title: "🐷 โปร “เติมหมูฟรี 1 ถาด!”", length: "0:20", details: "0–5s ป้ายโปรขึ้น “ฟรี 1 ถาด!” / 5–10s พนักงานเสิร์ฟหมู / 10–15s zoom ถาดเนื้อ / 15–20s ตัวหนังสือ “เฉพาะวันเสาร์นี้!”", mood: "โปรโมต / เพลง pop bright", filming: "tripod / focus pull", equipment: "มือถือ, ป้ายโปร", location: "หน้าร้าน", shootDate: "17 ต.ค.", notes: "โปรสุดสัปดาห์" }, { postDate: "19 ต.ค.", title: "🔥 สโลว์ควันเตา “อุ่นหัวใจ”", length: "0:10", details: "0–3s ควันลอยเบา / 3–7s หมูเริ่มสุก / 7–10s fade to โลโก้", mood: "ศิลป์ / เพลง ambient", filming: "macro slow motion", equipment: "มือถือ, ขาตั้ง", location: "เตากลางร้าน", shootDate: "17 ต.ค.", notes: "visual filler ใช้คั่น" }, { postDate: "20 ต.ค.", title: "🎥 เบื้องหลัง “วันถ่ายจริงทีมงาน”", length: "0:60", details: "0–10s ทีมงานตั้งกล้อง / 10–20s พนักงานช่วยจัดไฟ / 20–40s ถ่าย reaction / 40–55s หัวเราะหลุด / 55–60s ตัวหนังสือ “เบื้องหลังความอร่อย”", mood: "เป็นกันเอง / เพลง chill beat", filming: "handheld / behind the scenes", equipment: "มือถือ, Gimbal", location: "ทั่วร้าน", shootDate: "17 ต.ค.", notes: "ใช้เก็บภาพจริงขณะถ่าย" }, { postDate: "21 ต.ค.", title: "🧊 น้ำแข็งเย็นใจ", length: "0:15", details: "0–5s เทน้ำแข็งใส่แก้ว / 5–10s zoom หยดน้ำเกาะ / 10–15s โลโก้ร้าน “สดชื่นทุกคำ”", mood: "สดใส / เพลง chill", filming: "macro / handheld", equipment: "มือถือ, แก้วน้ำ, ไฟ LED", location: "มุมเครื่องดื่ม", shootDate: "17 ต.ค.", notes: "ใช้คั่นก่อนโพสต์ใหญ่" } ]
                    },
                    {
                        weekNumber: 4, range: "22–28 ตุลาคม 2025", shootDate: "24 ตุลาคม 2025", theme: "ปลายเดือน, โปรแรง, ขอบคุณลูกค้า",
                        content: [ { postDate: "22 ต.ค.", title: "🍲 “เปิดหม้อ” ASMR เสียงซุปเดือด", length: "0:20", details: "0–5s เปิดฝาหม้อช้า ๆ / 5–10s เสียงซุปเดือดฟู่ / 15–20s โลโก้ร้าน fade in", mood: "สบาย ๆ / เสียงจริง (ASMR)", filming: "macro close / tripod", equipment: "มือถือ, ไมค์บันทึกเสียง, หม้อ", location: "ครัวกลาง", shootDate: "24 ต.ค.", notes: "คลิป ASMR" }, { postDate: "23 ต.ค.", title: "😂 “เพื่อนบอกลดน้ำหนักแต่ชวนหมูกระทะ”", length: "0:25", details: "0–5s เพื่อนถือสลัด / 5–10s อีกคนถือจานหมู / 20–25s ตัวหนังสือ “ชีวิตมันต้องบาลานซ์!”", mood: "ตลก / เพลง upbeat", filming: "handheld / two shot", equipment: "มือถือ, props สลัด", location: "โต๊ะลูกค้า", shootDate: "24 ต.ค.", notes: "แนวไวรัล" }, { postDate: "24 ต.ค.", title: "💸 โปรปลายเดือน “มากิน 3 จ่าย 2”", length: "0:40", details: "0–5s ป้ายโปรขึ้น / 5–15s พนักงานชูนิ้ว “3 จ่าย 2” / 25–35s ถ่ายอาหารจัดเต็ม / 35–40s โลโก้พร้อม QR", mood: "โปรโมชัน / เพลง lively pop", filming: "tripod / pan / focus pull", equipment: "มือถือ, ป้ายโปร", location: "หน้าร้าน", shootDate: "24 ต.ค.", notes: "โปรแรงปลายเดือน" }, { postDate: "25 ต.ค.", title: "🐣 “ลูกเจี๊ยบขอบคุณลูกค้าทุกคน”", length: "0:45", details: "0–10s ทีมงานยิ้ม / 10–20s ตัดภาพลูกค้าประจำ / 30–45s ข้อความ “ขอบคุณที่อิ่มด้วยกันทั้งเดือน ❤️”", mood: "อบอุ่น / เพลง soft acoustic", filming: "handheld / steady follow", equipment: "มือถือ, ขาตั้ง", location: "ทั่วร้าน", shootDate: "24 ต.ค.", notes: "ปิดเดือนอย่างอบอุ่น" }, { postDate: "26 ต.ค.", title: "🎞️ รวมโมเมนต์เด่นตลอดเดือน", length: "0:60", details: "0–15s ช็อตอาหาร / 15–30s ช็อตลูกค้า / 45–60s ตัวหนังสือ “เดือนหน้าเจอกันใหม่!”", mood: "Recap / เพลงพลังบวก", filming: "montage edit", equipment: "ฟุตเทจรวม", location: "—", shootDate: "24 ต.ค.", notes: "ใช้คลิปตัดรวม" }, { postDate: "27 ต.ค.", title: "💬 รีวิวลูกค้าสายครอบครัว", length: "0:35", details: "0–10s ครอบครัวกินพร้อมหน้า / 10–20s เด็กพูด “หนูชอบเตานี้” / 30–35s โลโก้", mood: "อบอุ่น / เพลง mellow", filming: "handheld", equipment: "มือถือ, ไมค์", location: "มุมโต๊ะใหญ่", shootDate: "24 ต.ค.", notes: "รีวิวแนวครอบครัว" }, { postDate: "28 ต.ค.", title: "🔥 ช็อตไฟเตาลุก “เดือนนี้อร่อยสุด!”", length: "0:10", details: "0–5s ถ่ายไฟเตาลุกสวย / 5–10s โลโก้ร้าน + สโลแกน “อร่อยจนต้องกลับมาอีก”", mood: "ดุดัน / เพลง beat slow-mo", filming: "slow motion / macro", equipment: "มือถือ, ขาตั้ง", location: "เตากลางร้าน", shootDate: "24 ต.ค.", notes: "ปิดคอนเทนต์รายเดือน" } ]
                    },
                    {
                        weekNumber: 5, range: "29–31 ตุลาคม 2025", shootDate: "ใช้ฟุตเทจจากวันที่ 24 ต.ค.", theme: "สรุปและขอบคุณ",
                        content: [ { postDate: "29 ต.ค.", title: "😋 “หมูสุกกำลังดี” (ASMR)", length: "0:10", details: "macro ถ่ายหมูเปลี่ยนสีบนเตา / เสียงจี่", mood: "ASMR", filming: "Macro", equipment: "มือถือ", location: "เตากลาง", shootDate: "24 ต.ค.", notes: "จากคอนเทนต์สำรอง" }, { postDate: "30 ต.ค.", title: "🎉 “โปรต้อนรับเดือนหน้า”", length: "0:20", details: "ป้ายโปรใหม่ขึ้น / พนักงานถือป้าย", mood: "โปรโมชัน", filming: "Tripod", equipment: "มือถือ / ป้าย", location: "หน้าร้าน", shootDate: "24 ต.ค.", notes: "จากคอนเทนต์สำรอง" }, { postDate: "31 ต.ค.", title: "🎈 “ลูกค้าประจำพูดถึงร้าน”", length: "0:45", details: "2 ลูกค้าพูดสั้น ๆ / ยิ้ม / ขอบคุณ", mood: "soft pop", filming: "Mid shot", equipment: "มือถือ / ไมค์", location: "มุมประจำ", shootDate: "24 ต.ค.", notes: "จากคอนเทนต์สำรอง" } ]
                    }
                ],
                backup: [ { title: "🌧️ “ฝนตกก็มากินได้”", length: "0:30", details: "ถ่ายฝนโปรย / คนเดินเข้าร้าน / กล้องแพนเข้าเตา", mood: "cozy / jazz", equipment: "มือถือ / ร่ม", location: "หน้าร้าน", notes: "ใช้วันฝนตก" }, { title: "🪑 “โต๊ะพร้อม เตาพร้อม”", length: "0:15", details: "ถ่ายร้านว่าง ๆ ตอนเปิดร้าน / fade in โลโก้", mood: "minimal", equipment: "มือถือ / tripod", location: "ในร้าน", notes: "filler video" }, { title: "🐷 “ถามลูกค้า — เมนูโปรดคือ?”", length: "0:40", details: "สัมภาษณ์ 3 คนพูดสั้น ๆ / ปิดท้ายรวมเสียงหัวเราะ", mood: "lively", equipment: "มือถือ / ไมค์", location: "มุมลูกค้า", notes: "ใช้ได้ตลอด" }, { title: "😋 “หมูสุกกำลังดี”", length: "0:10", details: "macro ถ่ายหมูเปลี่ยนสีบนเตา / เสียงจี่", mood: "ASMR", equipment: "มือถือ", location: "เตากลาง", notes: "visual filler" }, { title: "🎉 “โปรต้อนรับเดือนหน้า”", length: "0:20", details: "ป้ายโปรใหม่ขึ้น / พนักงานถือป้าย", mood: "โปรโมชัน", equipment: "มือถือ / ป้าย", location: "หน้าร้าน", notes: "ใช้ต่อเนื่อง" }, { title: "🎈 “ลูกค้าประจำพูดถึงร้าน”", length: "0:45", details: "2 ลูกค้าพูดสั้น ๆ / ยิ้ม / ขอบคุณ", mood: "soft pop", equipment: "มือถือ / ไมค์", location: "มุมประจำ", notes: "ใช้แทนคอนเทนต์จริง" } ]
            },
            "ร้านอิ่มสุข หมูกระทะ": {
                weeks: [
                    {
                        weekNumber: 1, range: "1–7 ต.ค. 2025", shootDate: "1 ตุลาคม 2025", theme: "อบอุ่น, เรียบง่าย, ครอบครัว, หลังเลิกงาน",
                        content: [
                            { postDate: "1 ต.ค.", title: "เปิดเดือนอิ่มสุข", length: "0:40", details: "0–5s โลโก้เปิด / 5–20s บรรยากาศร้าน / 20–35s พนักงานยิ้มต้อนรับ / 35–40s โลโก้ปิด", mood: "สดใส / acoustic", filming: "handheld + pan", equipment: "มือถือ / Gimbal / ไฟ softbox", location: "หน้าร้าน", shootDate: "1 ต.ค.", notes: "เปิดเดือนใหม่" },
                            { postDate: "2 ต.ค.", title: "หมูกระทะรวมมิตร", length: "0:45", details: "0–10s วางหมูบนเตา / 10–25s ควันขึ้น / 25–45s ลูกค้าคีบหมูเข้าปาก", mood: "lively / food porn", filming: "macro + slow", equipment: "เตา / หมู / ควันเทียม", location: "โต๊ะ 2", shootDate: "1 ต.ค.", notes: "เมนูขายดี" },
                            { postDate: "3 ต.ค.", title: "ทีมงานเบื้องหลัง", length: "0:30", details: "0–10s เตรียมโต๊ะ / 10–25s พนักงานหัวเราะ / 25–30s โลโก้ปิด", mood: "friendly", filming: "behind shot", equipment: "มือถือ / ผ้ากันเปื้อน / โต๊ะ", location: "ครัวหลังร้าน", shootDate: "1 ต.ค.", notes: "เสริมความสัมพันธ์" },
                            { postDate: "4 ต.ค.", title: "ลูกค้าประจำพูดถึงร้าน", length: "0:50", details: "0–10s เปิดคำถาม / 10–40s คำตอบจริง / 40–50s โลโก้ปิด", mood: "รีวิวจริง", filming: "handheld interview", equipment: "ไมค์ / backdrop โลโก้", location: "หน้าร้าน", shootDate: "1 ต.ค.", notes: "testimonial" },
                            { postDate: "5 ต.ค.", title: "ควันลอย slow motion", length: "0:20", details: "0–20s เตา / ควัน / หมูฉ่ำ / แสงไฟสะท้อน", mood: "ละมุน / cinematic", filming: "slow motion", equipment: "กล้องมือถือ / ไฟ", location: "โต๊ะ 1", shootDate: "1 ต.ค.", notes: "B-roll" },
                            { postDate: "6 ต.ค.", title: "เสียงกระทะ x เพลงชิล", length: "0:30", details: "0–15s สับหมู / 15–30s พลิกหมู sync เพลง", mood: "จังหวะ / chill", filming: "close / rhythm edit", equipment: "ไมค์ / เตา", location: "ครัวเปิด", shootDate: "1 ต.ค.", notes: "ASMR เบาๆ" },
                            { postDate: "7 ต.ค.", title: "รวมช็อตกินแซ่บของลูกค้า", length: "0:50", details: "0–40s ลูกค้ากินสนุก / 40–50s ข้อความ “ของจริงต้องอิ่มสุข”", mood: "สนุก / EDM", filming: "montage", equipment: "มือถือ / ฟุตเทจลูกค้า", location: "หน้าร้าน", shootDate: "1 ต.ค.", notes: "ไวรัลขายอารมณ์" }
                        ]
                    },
                    {
                        weekNumber: 2, range: "8–13 ต.ค. 2025", shootDate: "8 ตุลาคม 2025", theme: "ยามค่ำคืน, เบื้องหลัง, คุณภาพ",
                        content: [
                            { postDate: "8 ต.ค.", title: "เบื้องหลังวันฝนตก", length: "0:45", details: "0–15s ฝนตกหน้าร้าน / 15–35s ลูกค้ากินไม่แคร์ฝน / 35–45s โลโก้ปิด", mood: "real life / warm", filming: "handheld", equipment: "มือถือ / กันฝน", location: "หน้าร้าน", shootDate: "8 ต.ค.", notes: "วันจริง" },
                            { postDate: "9 ต.ค.", title: "หมูย่างตอนกลางคืน", length: "0:35", details: "0–10s จุดเตา / 10–25s หมูสุก / 25–35s เสิร์ฟลูกค้า", mood: "warm night", filming: "tripod fix", equipment: "เตา / ไฟส้ม", location: "หน้าร้านกลางคืน", shootDate: "8 ต.ค.", notes: "แสงอบอุ่น" },
                            { postDate: "10 ต.ค.", title: "โปรวันศุกร์สุขใจ", length: "0:30", details: "0–10s พนักงานถือป้ายโปร / 10–25s ซูมจานหมู / 25–30s โลโก้", mood: "lively", filming: "product focus", equipment: "ป้ายโปร / โลโก้", location: "หน้าร้าน", shootDate: "8 ต.ค.", notes: "โปรประจำสัปดาห์" },
                            { postDate: "11 ต.ค.", title: "หมูกระทะรวมเพื่อน", length: "0:45", details: "0–10s เพื่อนมาถึง / 10–30s หัวเราะ / 30–45s คีบหมูพร้อมกัน", mood: "สนุก / youth", filming: "wide + close alt", equipment: "มือถือ / ไฟ / tripod", location: "โต๊ะกลาง", shootDate: "8 ต.ค.", notes: "ช่วงเยาวชน" },
                            { postDate: "12 ต.ค.", title: "รวมเสียงหัวเราะ", length: "0:40", details: "0–30s ลูกค้าหัวเราะ / 30–40s โลโก้ปิด", mood: "joy / upbeat", filming: "montage", equipment: "ฟุตเทจเสียงจริง", location: "—", shootDate: "8 ต.ค.", notes: "เสริมความเป็นกันเอง" },
                            { postDate: "13 ต.ค.", title: "มุมเด็ดของร้าน", length: "0:25", details: "0–10s zoom ผ่านไฟ / 10–25s โต๊ะ highlight", mood: "aesthetic", filming: "cinematic pan", equipment: "Gimbal / มือถือ", location: "มุมไฟ / โต๊ะกลาง", shootDate: "8 ต.ค.", notes: "โชว์บรรยากาศ" }
                        ]
                    },
                     {
                        weekNumber: 3, range: "14–19 ต.ค. 2025", shootDate: "15 ตุลาคม 2025", theme: "น้ำจิ้ม, บรรยากาศ, รีวิวจริง",
                        content: [
                            { postDate: "14 ต.ค.", title: "เตรียมของก่อนเปิดร้าน", length: "0:35", details: "0–10s พนักงานล้างผัก / 10–25s จัดโต๊ะ / 25–35s โลโก้เปิด", mood: "working vibe", filming: "documentary", equipment: "มือถือ / tripod", location: "ครัว / หน้าร้าน", shootDate: "15 ต.ค.", notes: "เบื้องหลังจริง" },
                            { postDate: "15 ต.ค.", title: "ชุดหมูรวมยอดฮิต", length: "0:45", details: "0–10s เปิดจาน / 10–30s หมูแต่ละแบบ / 30–45s เสิร์ฟโต๊ะ", mood: "food highlight", filming: "macro + tilt", equipment: "จานหมู / ไฟ / เตา", location: "โต๊ะ 3", shootDate: "15 ต.ค.", notes: "คอนเทนต์ขายตรง" },
                            { postDate: "16 ต.ค.", title: "ลูกค้าเด็กๆ", length: "0:30", details: "0–20s เด็กยิ้มกินหมู / 20–30s ปิดด้วยโลโก้", mood: "cute / warm", filming: "eye level", equipment: "มือถือ / ring light", location: "หน้าร้าน", shootDate: "15 ต.ค.", notes: "ภาพอบอุ่น" },
                            { postDate: "17 ต.ค.", title: "เสียงเตา ASMR", length: "0:40", details: "0–10s วางหมู / 10–40s เสียงฉ่า / โลโก้จบ", mood: "ASMR", filming: "macro mic", equipment: "ไมค์ / เตา / มือถือ", location: "ครัวเปิด", shootDate: "15 ต.ค.", notes: "โพสต์สายชิล" },
                            { postDate: "18 ต.ค.", title: "ลูกค้าขาประจำ tag ร้าน", length: "0:30", details: "0–20s ภาพรีโพสต์ / 20–30s โลโก้ปิด", mood: "review", filming: "screen record", equipment: "ฟุตเทจออนไลน์", location: "—", shootDate: "15 ต.ค.", notes: "รวมรีวิวจริง" },
                            { postDate: "19 ต.ค.", title: "วันครอบครัวอิ่มสุข", length: "0:45", details: "0–10s เปิดภาพครอบครัว / 10–35s หัวเราะกินหมู / 35–45s โลโก้ปิด", mood: "warm", filming: "soft lens", equipment: "มือถือ / ไฟ", location: "โต๊ะใหญ่", shootDate: "15 ต.ค.", notes: "mood feel good" }
                        ]
                    },
                    {
                        weekNumber: 4, range: "20–25 ต.ค. 2025", shootDate: "22 ตุลาคม 2025", theme: "โปรโมชัน, เจ้าของร้าน, ปิดเดือน",
                        content: [
                            { postDate: "20 ต.ค.", title: "ชุดผักสดของเรา", length: "0:25", details: "0–10s zoom ผัก / 10–25s จัดใส่จาน", mood: "green / clean", filming: "macro", equipment: "ผัก / เขียง / ไฟ", location: "ครัว", shootDate: "22 ต.ค.", notes: "คอนเทนต์สุขภาพ" },
                            { postDate: "21 ต.ค.", title: "เตรียมเตาก่อนเปิด", length: "0:35", details: "0–10s จุดถ่าน / 10–25s ตั้งตะแกรง / 25–35s ไฟติด", mood: "chill", filming: "slow pan", equipment: "เตา / ไฟ", location: "ครัวหลังร้าน", shootDate: "22 ต.ค.", notes: "เบื้องหลังจริง" },
                            { postDate: "22 ต.ค.", title: "โปรกลางเดือน", length: "0:40", details: "0–10s โลโก้เปิด / 10–30s พนักงานชี้ป้าย / 30–40s ปิดด้วย CTA", mood: "lively", filming: "product focus", equipment: "ป้ายโปร / มือถือ", location: "หน้าร้าน", shootDate: "22 ต.ค.", notes: "กระตุ้นยอดขาย" },
                            { postDate: "23 ต.ค.", title: "รวมช็อตเด็ดหมูกระทะ", length: "0:45", details: "0–40s montage หมูสุก / 40–45s โลโก้ปิด", mood: "food porn", filming: "montage", equipment: "ฟุตเทจรวม", location: "—", shootDate: "22 ต.ค.", notes: "highlight" },
                            { postDate: "24 ต.ค.", title: "เสียงหัวเราะลูกค้า", length: "0:30", details: "0–25s ลูกค้าหัวเราะ / 25–30s โลโก้", mood: "joy", filming: "natural cam", equipment: "มือถือ / Gimbal", location: "หน้าร้าน", shootDate: "22 ต.ค.", notes: "สร้างบรรยากาศ" },
                            { postDate: "25 ต.ค.", title: "หมูกระทะยามค่ำคืน", length: "0:50", details: "0–10s จุดไฟ / 10–30s ควัน / 30–50s ลูกค้ากิน", mood: "night mood", filming: "cinematic", equipment: "มือถือ / tripod", location: "หน้าร้านกลางคืน", shootDate: "22 ต.ค.", notes: "โทนอบอุ่น" }
                        ]
                    },
                    {
                        weekNumber: 5, range: "26–31 ต.ค. 2025", shootDate: "29 ตุลาคม 2025", theme: "พนักงาน, เบื้องหลัง, ปิดท้ายเดือน",
                        content: [
                            { postDate: "26 ต.ค.", title: "พนักงานสายฮา", length: "0:45", details: "0–30s แกล้งกัน / 30–45s โลโก้ปิด", mood: "fun", filming: "handheld", equipment: "มือถือ / พร็อปเล็ก", location: "ครัวหลังร้าน", shootDate: "29 ต.ค.", notes: "สายขำ" },
                            { postDate: "27 ต.ค.", title: "เตรียมวัตถุดิบใหม่เดือนหน้า", length: "0:35", details: "0–10s ขนของ / 10–20s เปิดกล่องหมู / 20–30s แพ็คใส่ตู้ / 30–35s โลโก้", mood: "fresh", filming: "handheld", equipment: "กล่อง / เขียง", location: "ครัวหลังร้าน", shootDate: "29 ต.ค.", notes: "เบื้องหลัง" },
                            { postDate: "28 ต.ค.", title: "รวมรอยยิ้มเดือนนี้", length: "0:60", details: "0–50s montage ลูกค้า / 50–60s “ขอบคุณที่มาอิ่มสุข”", mood: "warm", filming: "montage", equipment: "ฟุตเทจรวม", location: "—", shootDate: "29 ต.ค.", notes: "recap" },
                            { postDate: "29 ต.ค.", title: "เจ้าของร้านฝากถึงลูกค้า", length: "0:45", details: "0–10s โลโก้ / 10–35s พูดขอบคุณ / 35–45s โลโก้ปิด", mood: "heartfelt", filming: "fixed cam", equipment: "ไมค์ / backdrop", location: "หน้าร้าน", shootDate: "29 ต.ค.", notes: "ปิดเดือน" },
                            { postDate: "30 ต.ค.", title: "รีวิวเด่นประจำเดือน", length: "0:30", details: "0–5s โลโก้ / 5–25s รีวิวลูกค้า / 25–30s โลโก้", mood: "review", filming: "motion + text", equipment: "ฟุตเทจ / คอมเมนต์", location: "—", shootDate: "29 ต.ค.", notes: "รวมรีวิว" },
                            { postDate: "31 ต.ค.", title: "อิ่มสุขส่งท้ายเดือน", length: "0:60", details: "0–10s พระจันทร์เต็มดวง / 10–30s ลูกค้ากิน / 30–50s ทีมงานยิ้มกล้อง / 50–60s “แล้วพบกันใหม่”", mood: "soft pop", filming: "montage slow", equipment: "มือถือ / Gimbal / ไฟ", location: "หน้าร้านกลางคืน", shootDate: "29 ต.ค.", notes: "ปิดเดือนสวยงาม" }
                        ]
                    }
                ],
                backup: [
                    { title: "🌧️ ฝนตกก็อิ่มสุข", length: "0:25", details: "คนเข้าร้านตอนฝนตก / ช็อตเตาไฟ / โลโก้", mood: "cozy", equipment: "มือถือ", location: "หน้าร้าน", notes: "ใช้วันฝนตก" },
                    { title: "🎬 เบื้องหลังทีมงาน", length: "0:40", details: "ทีมงานเตรียมของ / พูดขำ / ขอบคุณ", mood: "warm", equipment: "มือถือ", location: "หลังร้าน", notes: "ใช้เติมสัปดาห์ว่าง" },
                    { title: "🥩 หมูสดวันนี้", length: "0:15", details: "macro ถาดหมู / โลโก้", mood: "visual", equipment: "มือถือ", location: "ครัว", notes: "filler" },
                    { title: "🎤 รีวิวสั้น", length: "0:20", details: "ลูกค้าพูด “อร่อยมาก” / โลโก้", mood: "casual", equipment: "มือถือ", location: "โต๊ะ", notes: "ใช้ได้ตลอด" },
                    { title: "🔥 ช็อตไฟ slow", length: "0:10", details: "ถ่ายไฟลุกช้า / โลโก้", mood: "visual", equipment: "มือถือ", location: "เตา", notes: "short" },
                    { title: "💬 ข้อคิดจากเจ้าของ", length: "0:45", details: "พูดสั้น ๆ “ขอบคุณลูกค้าทุกคน”", mood: "warm", equipment: "มือถือ / ไมค์", location: "หน้าร้าน", notes: "ปิดเดือน" }
                ]
            },
            "ร้านนฏกรเทเลคอม": {
                weeks: [
                    {
                        weekNumber: 1, range: "1–7 ตุลาคม 2025", shootDate: "6 ตุลาคม 2025", theme: "พรีเมียม, หลากหลาย, ยิ่งใหญ่",
                        content: [ { postDate: "6 ต.ค.", title: "🐲 ไลน์อาหารอลังการ", length: "0:60", details: "แพนกล้องยาวๆ ที่ไลน์บุฟเฟ่ต์ / ซูมอาหารทะเล", mood: "ยิ่งใหญ่ / เพลงออเคสตร้า", filming: "Gimbal / Slider", equipment: "กล้อง, Gimbal", location: "ไลน์บุฟเฟ่ต์", shootDate: "6 ต.ค.", notes: "โชว์ความหลากหลาย" } ]
                    }
                ],
                backup: [ { title: "🔥 โชว์กระทะร้อน", length: "0:15", details: "เชฟผัดอาหารบนกระทะไฟลุก", mood: "ตื่นเต้น", equipment: "กล้อง", location: "โซนทำอาหาร", notes: "เรียกน้ำย่อย" } ]
            }
        };

        const modal = document.getElementById('detail-modal');
        const modalContent = document.getElementById('modal-content');
        const modalTitle = document.getElementById('modal-title');
        const modalBody = document.getElementById('modal-body');
        const closeModalBtn = document.getElementById('close-modal-btn');
        const restaurantTabsContainer = document.getElementById('restaurant-tabs');
        const restaurantNameHeader = document.getElementById('restaurant-name-header');
        const footerRestaurantName = document.getElementById('footer-restaurant-name');

        const thaiMonthMap = { 'มกราคม': 'ม.ค.', 'กุมภาพันธ์': 'ก.พ.', 'มีนาคม': 'มี.ค.', 'เมษายน': 'เม.ย.', 'พฤษภาคม': 'พ.ค.', 'มิถุนายน': 'มิ.ย.', 'กรกฎาคม': 'ก.ค.', 'สิงหาคม': 'ส.ค.', 'กันยายน': 'ก.ย.', 'ตุลาคม': 'ต.ค.', 'พฤศจิกายน': 'พ.ย.', 'ธันวาคม': 'ธ.ค.' };

        function normalizeDateKey(dateStr) {
            if (!dateStr) return '';
            const parts = dateStr.split(' ');
            if (parts.length < 2) return dateStr;
            const day = parts[0];
            let month = parts[1];
            if (thaiMonthMap[month]) {
                month = thaiMonthMap[month];
            }
            return `${day} ${month}`;
        }

        function isShootDay(postDateStr, shootDateStr) {
            if (!postDateStr || !shootDateStr) return false;
            return normalizeDateKey(postDateStr) === normalizeDateKey(shootDateStr);
        }

        function createDetailItem(icon, label, value) {
            return `<div class="flex items-start space-x-4"><div class="flex-shrink-0 text-amber-400 pt-1"><i data-lucide="${icon}" class="w-5 h-5"></i></div><div><p class="font-semibold text-gray-400">${label}</p><p class="text-gray-200 text-base sm:text-lg">${value || 'N/A'}</p></div></div>`;
        }
        
        function showModal(item) {
            modalTitle.textContent = item.title;
            modalBody.innerHTML = `
                ${createDetailItem('calendar', 'วันโพสต์', item.postDate)}
                ${createDetailItem('clock', 'ความยาว', item.length)}
                ${createDetailItem('film', 'รายละเอียดช็อตต่อช็อต', item.details.replace(/\//g, '<br/>'))}
                ${createDetailItem('music', 'Mood / เพลง', item.mood)}
                ${createDetailItem('camera', 'วิธีถ่ายทำ / มุมกล้อง', item.filming)}
                ${createDetailItem('box', 'วัสดุ / อุปกรณ์', item.equipment)}
                ${createDetailItem('map-pin', 'สถานที่ถ่าย', item.location)}
                ${createDetailItem('star', 'วันที่ถ่ายจริง', item.shootDate)}
                ${createDetailItem('file-text', 'หมายเหตุ', item.notes)}
            `;
            lucide.createIcons();
            modal.classList.remove('opacity-0', 'invisible');
            modalContent.classList.remove('scale-95');
        }

        function hideModal() {
            modal.classList.add('opacity-0');
            modalContent.classList.add('scale-95');
            setTimeout(() => { modal.classList.add('invisible'); }, 300);
        }
        
        function renderPageForRestaurant(restaurantName) {
            const contentData = allRestaurantsData[restaurantName];
            const scheduleContainer = document.getElementById('schedule-container');
            const contentGrid = document.getElementById('content-grid');

            // Clear previous content
            scheduleContainer.innerHTML = '';
            contentGrid.innerHTML = '';
            restaurantNameHeader.textContent = `${restaurantName} | ตุลาคม 2025`;
            footerRestaurantName.textContent = `${restaurantName} Official`;

            const shootingSchedule = {};
            contentData.weeks.forEach((week, weekIndex) => {
                const rawShootDateKey = week.shootDate; 
                if (rawShootDateKey.startsWith("ใช้ฟุตเทจ")) return; 
                const shootDateKey = normalizeDateKey(rawShootDateKey);
                
                if (!shootingSchedule[shootDateKey]) {
                    shootingSchedule[shootDateKey] = [];
                }
                week.content.forEach((item, contentIndex) => {
                    if (normalizeDateKey(item.shootDate) === shootDateKey) {
                        const scheduleItem = { title: item.title, weekIndex: weekIndex, contentIndex: contentIndex };
                        if (!shootingSchedule[shootDateKey].some(existingItem => existingItem.title === scheduleItem.title)) {
                            shootingSchedule[shootDateKey].push(scheduleItem);
                        }
                    }
                });
            });

            for (const date in shootingSchedule) {
                const scheduleItem = document.createElement('div');
                scheduleItem.className = 'bg-gray-900 border-2 border-gray-700 rounded-lg overflow-hidden transition-all duration-300 hover:border-amber-500';
                const items = shootingSchedule[date];
                scheduleItem.innerHTML = `<button class="w-full flex justify-between items-center p-4 text-left hover:bg-gray-800 transition-colors duration-300"><span class="text-lg sm:text-xl font-semibold text-white">${date}</span><div class="flex items-center space-x-3"><span class="text-amber-400 font-bold">${items.length} รายการ</span><i data-lucide="chevron-down" class="text-amber-400 transition-transform duration-300"></i></div></button><div class="h-0 overflow-hidden transition-all duration-500 ease-in-out"><ul class="p-4 pt-0 border-t-2 border-gray-800 list-inside text-gray-300 space-y-2 text-sm sm:text-base">${items.map(item => `<li class="cursor-pointer hover:text-amber-400 transition-colors duration-200 pl-2" data-week="${item.weekIndex}" data-content="${item.contentIndex}">${item.title}</li>`).join('')}</ul></div>`;
                scheduleContainer.appendChild(scheduleItem);
            }

            scheduleContainer.querySelectorAll('button').forEach(button => {
                button.addEventListener('click', () => {
                    const contentDiv = button.nextElementSibling;
                    const icon = button.querySelector('i[data-lucide="chevron-down"]');
                    scheduleContainer.querySelectorAll('.h-auto').forEach(openContent => {
                        if (openContent !== contentDiv) {
                            openContent.style.height = '0px';
                            const otherIcon = openContent.previousElementSibling.querySelector('i[data-lucide="chevron-down"]');
                            if(otherIcon) otherIcon.style.transform = 'rotate(0deg)';
                        }
                    });
                    if (contentDiv.style.height && contentDiv.style.height !== '0px') {
                        contentDiv.style.height = '0px';
                        if(icon) icon.style.transform = 'rotate(0deg)';
                    } else {
                        contentDiv.style.height = `${contentDiv.scrollHeight}px`;
                        if(icon) icon.style.transform = 'rotate(180deg)';
                    }
                });
            });

            scheduleContainer.querySelectorAll('li[data-week]').forEach(li => {
                li.addEventListener('click', (e) => {
                    e.stopPropagation(); 
                    const weekIndex = li.dataset.week;
                    const contentIndex = li.dataset.content;
                    if (weekIndex !== undefined && contentIndex !== undefined) {
                        const item = contentData.weeks[weekIndex].content[contentIndex];
                        showModal(item);
                    }
                });
            });

            contentData.weeks.forEach((week, weekIndex) => {
                const weekSection = document.createElement('section');
                weekSection.className = 'fade-in-up';
                weekSection.style.animationDelay = `${(weekIndex + 2) * 150}ms`;
                weekSection.innerHTML = `<div class="mb-6"><h2 class="text-2xl sm:text-3xl md:text-4xl font-bold text-white">Week ${week.weekNumber} <span class="text-amber-400 font-light">(${week.range})</span></h2><p class="text-gray-400 mt-1"><strong>Theme:</strong> ${week.theme}</p><p class="text-amber-400 font-semibold mt-1"><strong><i class="inline-block" data-lucide="camera"></i> Shoot Day:</strong> ${week.shootDate}</p></div><div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-7 gap-4">${week.content.map((item, index) => {
                    const isShootingDay = isShootDay(item.postDate, week.shootDate);
                    let shootDayScheduleItems = [];
                    if (isShootingDay) {
                        const shootDateKey = normalizeDateKey(item.postDate);
                        if (shootingSchedule[shootDateKey]) {
                            shootDayScheduleItems = shootingSchedule[shootDateKey];
                        }
                    }
                    return `<div data-week="${week.weekNumber-1}" data-content="${index}" class="content-card bg-gray-900 rounded-lg p-3 flex flex-col justify-between transition-all duration-300 cursor-pointer"><div><div class="flex justify-between items-center mb-2"><p class="font-bold text-lg text-white">${item.postDate}</p>${isShootingDay ? `<div class="shoot-day-badge-container"><span class="shoot-day-badge text-xs px-2 py-1 rounded">SHOOT</span><div class="shoot-day-popover"><h4 class="font-bold text-amber-400 mb-1">รายการที่ถ่ายวันนี้:</h4><ul>${shootDayScheduleItems.map(sItem => `<li data-week="${sItem.weekIndex}" data-content="${sItem.contentIndex}">${sItem.title}</li>`).join('')}</ul></div></div>` : ''}</div><h3 class="font-semibold h-20 text-gray-300 text-base">${item.title}</h3></div><button class="mt-3 w-full bg-gray-800 text-amber-400 font-semibold py-2 rounded hover:bg-amber-400 hover:text-black transition-colors duration-300 text-sm border border-gray-700">DETAILS</button></div>`;
                }).join('')}</div>`;
                contentGrid.appendChild(weekSection);
            });

            if(contentData.backup && contentData.backup.length > 0) {
                const backupSection = document.createElement('section');
                backupSection.className = 'fade-in-up';
                backupSection.style.animationDelay = `${(contentData.weeks.length + 2) * 150}ms`;
                backupSection.innerHTML = `<div class="mb-6"><h2 class="text-2xl sm:text-3xl md:text-4xl font-bold text-slate-300">Backup Content</h2><p class="text-gray-400">สำหรับใช้ในกรณีฉุกเฉิน หรือปรับเปลี่ยนแผน</p></div><div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">${contentData.backup.map((item, index) => `<div data-backup="${index}" class="content-card bg-gray-900 rounded-lg p-3 flex flex-col justify-between transition-all duration-300 cursor-pointer border-dashed border-gray-600"><div><h3 class="font-semibold text-slate-300 h-16 text-base">${item.title}</h3></div><button class="mt-3 w-full bg-gray-800 text-amber-400 font-semibold py-2 rounded hover:bg-amber-400 hover:text-black transition-colors duration-300 text-sm border border-gray-700">DETAILS</button></div>`).join('')}</div>`;
                contentGrid.appendChild(backupSection);
            }

            document.querySelectorAll('.content-card').forEach(card => {
                card.addEventListener('click', (e) => {
                    if (e.target.closest('.shoot-day-badge-container')) return;
                    const weekIndex = card.dataset.week;
                    const contentIndex = card.dataset.content;
                    const backupIndex = card.dataset.backup;
                    if (weekIndex !== undefined && contentIndex !== undefined) {
                        showModal(contentData.weeks[weekIndex].content[contentIndex]);
                    } else if (backupIndex !== undefined) {
                        showModal(contentData.backup[backupIndex]);
                    }
                });
            });
            
            document.querySelectorAll('.shoot-day-popover li').forEach(li => {
                li.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const weekIndex = li.dataset.week;
                    const contentIndex = li.dataset.content;
                    if (weekIndex !== undefined && contentIndex !== undefined) {
                        showModal(contentData.weeks[weekIndex].content[contentIndex]);
                    }
                });
            });

            document.querySelectorAll('.shoot-day-badge-container').forEach(container => {
                const badge = container.querySelector('.shoot-day-badge');
                if (badge) {
                    badge.addEventListener('click', (event) => {
                        event.stopPropagation();
                        const popover = container.querySelector('.shoot-day-popover');
                        if (popover) {
                            document.querySelectorAll('.shoot-day-popover.popover-visible').forEach(p => {
                                if (p !== popover) p.classList.remove('popover-visible');
                            });
                            popover.classList.toggle('popover-visible');
                        }
                    });
                }
            });
            
            lucide.createIcons();
        }

        function setupTabs() {
            const restaurantNames = Object.keys(allRestaurantsData);
            restaurantNames.forEach((name, index) => {
                const tab = document.createElement('button');
                tab.className = 'restaurant-tab text-gray-400 font-semibold py-3 px-6 hover:text-amber-400 whitespace-nowrap';
                tab.textContent = name;
                tab.dataset.restaurant = name;
                if (index === 0) {
                    tab.classList.add('active');
                }
                restaurantTabsContainer.appendChild(tab);
            });

            restaurantTabsContainer.addEventListener('click', (e) => {
                if (e.target.matches('.restaurant-tab')) {
                    const restaurantName = e.target.dataset.restaurant;
                    restaurantTabsContainer.querySelector('.active').classList.remove('active');
                    e.target.classList.add('active');
                    renderPageForRestaurant(restaurantName);
                }
            });
        }
        
        closeModalBtn.addEventListener('click', hideModal);
        
        document.addEventListener('click', (e) => {
            if (e.target === modal) hideModal();
            if (!e.target.closest('.shoot-day-badge-container')) {
                document.querySelectorAll('.shoot-day-popover.popover-visible').forEach(p => p.classList.remove('popover-visible'));
            }
        });

        window.onload = function() {
            const qrCanvas = document.getElementById('qr-code');
            if (qrCanvas) {
                new QRious({ element: qrCanvas, value: window.location.href, size: 140, padding: 10, background: '#ffffff', foreground: '#000000' });
            }
            setupTabs();
            renderPageForRestaurant(Object.keys(allRestaurantsData)[0]); // Render initial restaurant
        };
    </script>
</body>
</html>

