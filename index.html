<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ตารางงานฝ่ายกราฟิกและตัดต่อวิดีโอ</title>
    <!-- โหลด Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Load Sarabun Font for Thai language support -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Kanit', 'Sarabun', sans-serif;
            transition: background-color 0.5s, color 0.5s;
            min-height: 100vh;
            padding-top: 80px;
            color: #333;
            background-color: #f8f8f8;
        }
        header {
            transition: background-color 0.5s, box-shadow 0.5s;
            background-color: #fff;
        }
        .modern-container {
            transition: background-color 0.5s, box-shadow 0.5s;
            background-color: #fff;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            border: 1px solid #e0e0e0;
        }
        .day-header {
            transition: background-color 0.5s, color 0.5s;
            background-color: #f3f4f6;
            border-bottom-color: #e5e7eb;
        }
        .tasks-list {
            border-color: #e5e7eb;
        }
        .time-text {
            color: #4b5563;
        }
        .tab-button {
            transition: all 0.2s ease-in-out;
            transform: translateY(0);
        }
        .tab-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        /* Hide scrollbar styles */
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        @keyframes bounce-x {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(12px); }
        }
        .animate-bounce-x {
            animation: bounce-x 1.2s infinite;
        }
    </style>
</head>
<body>
<header class="fixed top-0 left-0 w-full bg-white shadow-lg z-10 border-b border-gray-200 transition duration-500">
    <div class="container mx-auto px-4 py-3 flex justify-between items-center relative">
        <div class="flex items-center space-x-4">
            <a href="#" class="flex items-center group">
                <span class="text-3xl font-extrabold tracking-widest text-green-500 group-hover:text-green-600 transition duration-300">
                    NTK
                </span>
                <span class="ml-3 hidden sm:inline text-base font-medium text-gray-500 border-l border-gray-300 pl-4">
                    Graphic & Video Schedule
                </span>
            </a>
        </div>
        <nav class="flex items-center space-x-2 sm:space-x-4 relative">
            <!-- Notification Icon -->
            <button id="header-notify-btn"
                class="relative p-2 w-10 h-10 flex items-center justify-center rounded-full bg-gray-100
                       text-blue-500 hover:bg-blue-100
                       shadow transition duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500"
                title="แจ้งเตือนงานวันนี้">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
                </svg>
            </button>
            <!-- Modal แจ้งเตือน (ย้ายมาอยู่ใน nav ใกล้ไอคอน) -->
            <div id="notify-modal" class="absolute top-12 right-0 z-50 bg-white rounded-2xl shadow-2xl w-full max-w-xs sm:max-w-md p-4 sm:p-6 border border-gray-200 hidden transition-opacity duration-300"
                 style="backdrop-filter: blur(8px); background: rgba(255,255,255,0.95);">
                <button id="close-modal-btn" class="absolute top-3 right-3 text-gray-400 hover:text-red-500 text-2xl font-bold focus:outline-none">&times;</button>
                <h2 class="text-lg sm:text-xl font-semibold text-blue-700 mb-2">แจ้งเตือนงาน</h2>
                <div id="modal-content" class="space-y-2 text-sm sm:text-base text-gray-800">
                    <!-- รายละเอียดงานจะถูกเติมที่นี่ -->
                </div>
            </div>
            <a href="https://line.me/ti/p/Z58j7HN-vt" target="_blank" title="ติดต่อทาง LINE"
                class="flex items-center px-3 py-2 rounded-full bg-green-500 hover:bg-green-600 text-white font-semibold shadow transition duration-300 focus:outline-none focus:ring-2 focus:ring-green-400">
                LINE
            </a>
            <a href="tel:+66812625455" title="โทรศัพท์ติดต่อ"
                class="flex items-center px-3 py-2 rounded-full bg-blue-500 hover:bg-blue-600 text-white font-semibold shadow transition duration-300 focus:outline-none focus:ring-2 focus:ring-blue-400">
                <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24"><path d="M6.62 10.79a15.053 15.053 0 0 0 6.59 6.59l2.2-2.2a1.003 1.003 0 0 1 1.11-.21c1.21.49 2.53.76 3.9.76a1 1 0 0 1 1 1V20a1 1 0 0 1-1 1C10.07 21 3 13.93 3 5a1 1 0 0 1 1-1h3.5a1 1 0 0 1 1 1c0 1.37.27 2.69.76 3.9a1.003 1.003 0 0 1-.21 1.11l-2.2 2.2z"></path></svg>
                โทร
            </a>
        </nav>
    </div>
</header>
<main class="container mx-auto p-4 sm:p-8 max-w-4xl modern-container rounded-2xl my-8">
    <header class="text-center mb-8 pt-4 pb-2 border-b border-gray-300">
        <h1 class="text-xl md:text-4xl font-semibold text-gray-800 tracking-wider font-kanit">
            ตารางงานฝ่ายกราฟิกและตัดต่อวิดีโอ
        </h1>
        <p class="text-xl md:text-2xl text-gray-600 font-light mt-2 font-kanit">
            เดือนตุลาคม 2568
        </p>
    </header>
    <!-- Section งานวันนี้ -->
    <section id="today-tasks-section" class="mb-8">
        <!-- งานวันนี้จะถูกเติมที่นี่ -->
    </section>
    <nav id="tabs-container" class="mb-8 flex flex-wrap justify-center gap-2 sm:gap-3 p-2 bg-gray-50 rounded-xl shadow-inner border border-gray-200">
        <!-- Tabs will be injected here -->
    </nav>
    <section id="schedule-container" class="space-y-8">
        <div id="no-tasks-message" class="hidden text-center p-8 text-xl font-medium text-gray-500">
            ไม่มีรายการงานสำหรับร้านนี้ในช่วงเวลานี้
        </div>
    </section>
    <!-- Section ผลการดำเนินงาน -->
    <section id="performance-section" class="mt-12 mb-8">
        <div class="bg-green-50 border border-green-200 rounded-2xl shadow p-6">
            <h2 class="text-2xl font-bold text-green-700 mb-4 font-kanit">ผลการดำเนินงานรายวัน</h2>
            <div id="performance-cards" class="space-y-4"></div>
        </div>
    </section>
    <footer class="text-center mt-12 pt-4 border-t border-gray-300">
        <p class="text-gray-500 font-medium text-lg tracking-wide">
            Presented : FRANK Graphic Design NTK
        </p>
        <p class="text-gray-400 text-sm mt-1">&copy; 2025 All Rights Reserved.</p>
    </footer>
</main>

<script>
    // --- Schedule Data ---
    // แปลงปี ค.ศ. เป็น พ.ศ. ใน scheduleData
    const scheduleData = [
        {
            date: "วันพุธที่ 1 ตุลาคม 2568",
            tasks: [
                { time: "09.30–10.00", title: "เตรียมอุปกรณ์ / ตรวจนัดถ่าย", client: "internal" },
                { time: "10.00–12.00", title: "ถ่ายร้านอิ่มสุข", details: "คอนเทนต์: เมนูสุขภาพ, บรรยากาศเช้าเบาๆ", client: "aimsook" },
                { time: "12.00–15.00", title: "ถ่ายร้านนฏกรเทเลคอม", details: "คอนเทนต์: How to ทำความสะอาดมือถืออย่างปลอดภัย", client: "natakorn" },
                { time: "15.00–18.30", title: "ตัดต่อคลิป “มินิรีวิวมือถือ”", client: "internal" },
                { time: "18.30–20.00", title: "ถ่ายร้านลูกเจี๊ยบ", details: "คอนเทนต์: โปรต้นสัปดาห์, ถ่ายแสงไฟเย็น", client: "lookjeab" },
                { time: "20.00–20.30", title: "สรุปงาน", client: "internal" },
            ]
        },
        {
            date: "วันพฤหัสบดีที่ 2 ตุลาคม 2568",
            tasks: [
                { time: "09.30–10.00", title: "ตรวจอุปกรณ์ / เตรียมเสียง", client: "internal" },
                { time: "10.00–12.00", title: "ถ่ายร้านอิ่มสุข", details: "คอนเทนต์: เมนูยอดฮิต, ถ่ายแบบสโลโมชั่นขณะตักอาหาร", client: "aimsook" },
                { time: "12.00–15.00", title: "ถ่ายร้านนฏกรเทเลคอม", details: "คอนเทนต์: รีวิว Samsung / โปรอุปกรณ์เสริม", client: "natakorn" },
                { time: "15.00–18.30", title: "ตัดต่อคลิปไวรัล “ลูกเจี๊ยบชวนกิน”", client: "internal" },
                { time: "18.30–20.00", title: "ถ่ายร้านลูกเจี๊ยบ", details: "คอนเทนต์: Meme สั้น 5 วิ, ถ่าย Reaction ลูกค้า", client: "lookjeab" },
                { time: "20.00–20.30", title: "สรุปงาน", client: "internal" },
            ]
        },
        {
            date: "วันศุกร์ที่ 3 ตุลาคม 2568",
            tasks: [
                { time: "09.30–10.00", title: "เตรียมอุปกรณ์ / ตรวจนัดร้าน", client: "internal" },
                { time: "10.00–12.00", title: "ถ่ายร้านอิ่มสุข", details: "คอนเทนต์: ถ่ายพนักงานยิ้มแย้ม / แนะนำเมนูสุขภาพ", client: "aimsook" },
                { time: "12.00–15.00", title: "ถ่ายร้านนฏกรเทเลคอม", details: "คอนเทนต์: How to ทำความสะอาดมือถืออย่างปลอดภัย", client: "natakorn" },
                { time: "15.00–18.30", title: "ตัดต่อคลิป “เทคนิคมือถือประจำสัปดาห์”", client: "internal" },
                { time: "18.30–20.00", title: "ถ่ายร้านลูกเจี๊ยบ", details: "คอนเทนต์: เปิดร้านวันจันทร์, โปรลดชุดหมูกระทะ", client: "lookjeab" },
                { time: "20.00–20.30", title: "สรุปงาน / อัปโหลดไฟล์", client: "internal" },
            ]
        },
        {
            date: "วันเสาร์ที่ 4 ตุลาคม 2568",
            tasks: [
                { time: "09.30–10.00", title: "เตรียมอุปกรณ์ / ตรวจเสียงและไมค์", client: "internal" },
                { time: "10.00–12.00", title: "ถ่ายร้านอิ่มสุข", details: "คอนเทนต์: ครอบครัวมาทาน, มุมถ่ายรูปในร้าน", client: "aimsook" },
                { time: "12.00–15.00", title: "ถ่ายนฏกรเทเลคอม", details: "คอนเทนต์: รีวิวอุปกรณ์เสริม, การดูแลมือถือในหน้าฝน", client: "natakorn" },
                { time: "15.00–18.30", title: "ตัดต่อคลิปรวม “อิ่มสุข x ลูกค้า” / ทำภาพแบนเนอร์", client: "internal" },
                { time: "18.30–20.00", title: "ถ่ายร้านลูกเจี๊ยบ", details: "คอนเทนต์: เย็นวันเสาร์สุดคึกคัก, ถ่ายบรรยากาศโต๊ะใหญ่", client: "lookjeab" },
                { time: "20.00–20.30", title: "สรุปและจัดเก็บอุปกรณ์", client: "internal" },
            ]
        },
     {
            date: "วันจันทร์ที่ 6 ตุลาคม 2568",
            tasks: [
                { time: "09.30–10.00", title: "เตรียมกล้อง / สำรวจจุดถ่าย", client: "internal" },
                { time: "10.00–12.00", title: "ถ่ายร้านอิ่มสุข", details: "คอนเทนต์: มื้อเที่ยงสุดสัปดาห์, ถ่ายเมนูจัดจานสวยๆ", client: "aimsook" },
                { time: "12.00–15.00", title: "ถ่ายร้านนฏกรเทเลคอม", details: "คอนเทนต์: รีวิวมือถือมือสอง, ถ่ายตอนลูกค้าซ่อมเสร็จรับเครื่อง", client: "natakorn" },
                { time: "15.00–18.30", title: "ตัดต่อคลิป / ใส่ซับ / ปรับสี", client: "internal" },
                { time: "18.30–20.00", title: "ถ่ายร้านลูกเจี๊ยบ", details: "คอนเทนต์: ศุกร์เย็นไฟย่าง, เพื่อนๆ นัดกินหมูกระทะ", client: "lookjeab" },
                { time: "20.00–20.30", title: "สรุปและเก็บอุปกรณ์", client: "internal" },
            ]
        },
        {
            date: "วันอังคารที่ 7 ตุลาคม 2568",
            tasks: [
                { time: "09.30–10.00", title: "เตรียมอุปกรณ์ / ตรวจตาราง / ยืนยันเวลาถ่าย", client: "internal" },
                { time: "10.00–12.00", title: "ถ่ายร้านอิ่มสุข", details: "คอนเทนต์: การเตรียมอาหาร, บรรยากาศตอนสาย, เมนูยอดนิยมช่วงกลางวัน", client: "aimsook" },
                { time: "12.00–15.00", title: "พักกลางวัน / ถ่ายนฏกรเทเลคอม", details: "คลิป Tips: วิธีถ่ายรูปให้สวยด้วยมือถือ, เก็บบรรยากาศในห้าง", client: "natakorn" },
                { time: "15.00–18.30", title: "ตัดต่อคลิปและออกแบบกราฟิก", client: "internal" },
                { time: "18.30–20.00", title: "ถ่ายร้านลูกเจี๊ยบ", details: "คอนเทนต์: หมูกระทะตอนพระอาทิตย์ตก, ครอบครัวมาทานเย็นวันพุธ", client: "lookjeab" },
                { time: "20.00–20.30", title: "สรุปและจัดเก็บอุปกรณ์", client: "internal" },
            ]
        },
        {
            date: "วันพุธที่ 8 ตุลาคม 2568",
            tasks: [
                { time: "09.30–10.00", title: "เตรียมอุปกรณ์ / ตรวจตาราง / ยืนยันเวลาถ่าย", client: "internal" },
                { time: "10.00–12.00", title: "ถ่ายร้านอิ่มสุข", details: "คอนเทนต์: การเตรียมอาหาร, บรรยากาศตอนสาย, เมนูยอดนิยมช่วงกลางวัน", client: "aimsook" },
                { time: "12.00–15.00", title: "พักกลางวัน / ถ่ายนฏกรเทเลคอม", details: "คลิป Tips: วิธีถ่ายรูปให้สวยด้วยมือถือ, เก็บบรรยากาศในห้าง", client: "natakorn" },
                { time: "15.00–18.30", title: "ตัดต่อคลิปและออกแบบกราฟิก", client: "internal" },
                { time: "18.30–20.00", title: "ถ่ายร้านลูกเจี๊ยบ", details: "คอนเทนต์: หมูกระทะตอนพระอาทิตย์ตก, ครอบครัวมาทานเย็นวันพุธ", client: "lookjeab" },
                { time: "20.00–20.30", title: "สรุปและจัดเก็บอุปกรณ์", client: "internal" },
            ]
        },
        {
            date: "วันพฤหัสบดีที่ 9 ตุลาคม 2568",
            tasks: [
                { time: "09.30–10.00", title: "เตรียมอุปกรณ์ / ตรวจเมมกล้อง", client: "internal" },
                { time: "10.00–12.00", title: "ถ่ายร้านอิ่มสุข", details: "คอนเทนต์: เมนูอาหารเช้า, การจัดเรียงไลน์บุฟเฟ่ต์", client: "aimsook" },
                { time: "12.00–15.00", title: "ถ่ายร้านนฏกรเทเลคอม", details: "คอนเทนต์: รีวิวมือถือรุ่นใหม่, ถ่ายโปรโมชั่นหน้าร้าน", client: "natakorn" },
                { time: "15.00–18.30", title: "ตัดต่อวิดีโอ “อิ่มสุข - เมนูใหม่” / ทำภาพกราฟิกโปรฯ", client: "internal" },
                { time: "18.30–20.00", title: "ถ่ายร้านลูกเจี๊ยบ", details: "คอนเทนต์: มุกตลก / meme หมูกระทะ / ช่วงแสงเย็น", client: "lookjeab" },
                { time: "20.00–20.30", title: "สรุปงาน / อัปโหลดไฟล์", client: "internal" },
            ]
        },
        {
            date: "วันศุกร์ที่ 10 ตุลาคม 2568",
            tasks: [
                { time: "09.30–10.00", title: "ตรวจอุปกรณ์, ชาร์จแบตกล้อง", client: "internal" },
                { time: "10.00–12.00", title: "ถ่ายร้านอิ่มสุข", details: "คอนเทนต์: ลูกค้าประจำ, ถ่ายเสียงจริงพูดถึงร้าน, บรรยากาศก่อนเที่ยง", client: "aimsook" },
                { time: "12.00–15.00", title: "ถ่ายนฏกรเทเลคอม", details: "คอนเทนต์: เทคนิคเลือกมือถือสำหรับเรียน/ทำงาน", client: "natakorn" },
                { time: "15.00–18.30", title: "ตัดต่อคลิป “โปรศุกร์สุดคุ้ม” / ทำโพสต์รวมโปรร้านมือถือ", client: "internal" },
                { time: "18.30–20.00", title: "ถ่ายร้านลูกเจี๊ยบ", details: "คอนเทนต์: ศุกร์เย็นชวนเพื่อนมากิน, ถ่ายช็อตไฟย่างสวยๆ", client: "lookjeab" },
                { time: "20.00–20.30", title: "สรุปและเก็บอุปกรณ์", client: "internal" },
            ]
        },
        {
            date: "วันเสาร์ที่ 11 ตุลาคม 2568",
            tasks: [
                { time: "09.30–10.00", title: "เตรียมอุปกรณ์ / ตรวจเสียงและไมค์", client: "internal" },
                { time: "10.00–12.00", title: "ถ่ายร้านอิ่มสุข", details: "คอนเทนต์: ครอบครัวมาทาน, มุมถ่ายรูปในร้าน", client: "aimsook" },
                { time: "12.00–15.00", title: "ถ่ายนฏกรเทเลคอม", details: "คอนเทนต์: รีวิวอุปกรณ์เสริม, การดูแลมือถือในหน้าฝน", client: "natakorn" },
                { time: "15.00–18.30", title: "ตัดต่อคลิปรวม “อิ่มสุข x ลูกค้า” / ทำภาพแบนเนอร์", client: "internal" },
                { time: "18.30–20.00", title: "ถ่ายร้านลูกเจี๊ยบ", details: "คอนเทนต์: เย็นวันเสาร์สุดคึกคัก, ถ่ายบรรยากาศโต๊ะใหญ่", client: "lookjeab" },
                { time: "20.00–20.30", title: "สรุปและจัดเก็บอุปกรณ์", client: "internal" },
            ]
        },
        {
            date: "วันจันทร์ที่ 13 ตุลาคม 2568",
            tasks: [
                { time: "09.30–10.00", title: "เตรียมอุปกรณ์ / ตรวจนัดถ่าย", client: "internal" },
                { time: "10.00–12.00", title: "ถ่ายร้านอิ่มสุข", details: "คอนเทนต์: เปิดเช้า, พนักงานเตรียมอาหาร, เบื้องหลังครัว", client: "aimsook" },
                { time: "12.00–15.00", title: "ถ่ายร้านนฏกรเทเลคอม", details: "คอนเทนต์: คลิปเบื้องหลังการซ่อมมือถือ, ช่างซ่อมพูด", client: "natakorn" },
                { time: "15.00–18.30", title: "ตัดต่อและออกแบบกราฟิก “อิ่มสุขประจำสัปดาห์”", client: "internal" },
                { time: "18.30–20.00", title: "ถ่ายร้านลูกเจี๊ยบ", details: "คอนเทนต์: แนะนำเมนูใหม่ / มุกสั้นๆแบบไวรัล", client: "lookjeab" },
                { time: "20.00–20.30", title: "สรุปและเก็บงาน", client: "internal" },
            ]
        },
        {
            date: "วันอังคารที่ 14 ตุลาคม 2568",
            tasks: [
                { time: "09.30–10.00", title: "เตรียมอุปกรณ์ / ยืนยันเวลาร้าน", client: "internal" },
                { time: "10.00–12.00", title: "ถ่ายร้านอิ่มสุข", details: "คอนเทนต์: ถ่ายเมนูพิเศษ, มุมอิ่มสุขโซนใหม่", client: "aimsook" },
                { time: "12.00–15.00", title: "ถ่ายร้านนฏกรเทเลคอม", details: "คอนเทนต์: โปร Vivo / ถ่ายศูนย์บริการ, ทีมบริการ", client: "natakorn" },
                { time: "15.00–18.30", title: "ตัดต่อคลิปและออกแบบแบนเนอร์มือถือ", client: "internal" },
                { time: "18.30–20.00", title: "ถ่ายร้านลูกเจี๊ยบ", details: "คอนเทนต์: เก็บมู้ดไฟย่าง, บรรยากาศหัวค่ำ, เสียงหัวเราะลูกค้า", client: "lookjeab" },
                { time: "20.00–20.30", title: "สรุปงาน / อัปโหลดไฟล์", client: "internal" },
            ]
        },
        {
            date: "วันพุธที่ 15 ตุลาคม 2568",
            tasks: [
                { time: "09.30–10.00", title: "ตรวจอุปกรณ์ / เตรียมเสียง", client: "internal" },
                { time: "10.00–12.00", title: "ถ่ายร้านอิ่มสุข", details: "คอนเทนต์: เมนูยอดฮิต, ถ่ายแบบสโลโมชั่นขณะตักอาหาร", client: "aimsook" },
                { time: "12.00–15.00", title: "ถ่ายร้านนฏกรเทเลคอม", details: "คอนเทนต์: รีวิว Samsung / โปรอุปกรณ์เสริม", client: "natakorn" },
                { time: "15.00–18.30", title: "ตัดต่อคลิปไวรัล “ลูกเจี๊ยบชวนกิน”", client: "internal" },
                { time: "18.30–20.00", title: "ถ่ายร้านลูกเจี๊ยบ", details: "คอนเทนต์: Meme สั้น 5 วิ, ถ่าย Reaction ลูกค้า", client: "lookjeab" },
                { time: "20.00–20.30", title: "สรุปงาน", client: "internal" },
            ]
        },
        {
            date: "วันพฤหัสบดีที่ 16 ตุลาคม 2568",
            tasks: [
                { time: "09.30–10.00", title: "เตรียมอุปกรณ์ / ตรวจกล้องและไมค์", client: "internal" },
                { time: "10.00–12.00", title: "ถ่ายร้านอิ่มสุข", details: "คอนเทนต์: เมนูประจำวันพฤหัส, บรรยากาศลูกค้าช่วงสาย", client: "aimsook" },
                { time: "12.00–15.00", title: "ถ่ายร้านนฏกรเทเลคอม", details: "คอนเทนต์: โปรลดราคา, ถ่ายพนักงานแนะนำลูกค้า", client: "natakorn" },
                { time: "15.00–18.30", title: "ตัดต่อคลิป “อิ่มสุข - เมนูใหม่ประจำสัปดาห์”", client: "internal" },
                { time: "18.30–20.00", title: "ถ่ายร้านลูกเจี๊ยบ", details: "คอนเทนต์: ช่วงหัวค่ำ ลูกค้าแน่น, ถ่ายควันไฟย่าง", client: "lookjeab" },
                { time: "20.00–20.30", title: "สรุปงาน / อัปโหลดไฟล์", client: "internal" },
            ]
        },
        {
            date: "วันศุกร์ที่ 17 ตุลาคม 2568",
            tasks: [
                { time: "09.30–10.00", title: "เตรียมกล้อง / สำรวจจุดถ่าย", client: "internal" },
                { time: "10.00–12.00", title: "ถ่ายร้านอิ่มสุข", details: "คอนเทนต์: มื้อเที่ยงสุดสัปดาห์, ถ่ายเมนูจัดจานสวยๆ", client: "aimsook" },
                { time: "12.00–15.00", title: "ถ่ายร้านนฏกรเทเลคอม", details: "คอนเทนต์: รีวิวมือถือมือสอง, ถ่ายตอนลูกค้าซ่อมเสร็จรับเครื่อง", client: "natakorn" },
                { time: "15.00–18.30", title: "ตัดต่อคลิป / ใส่ซับ / ปรับสี", client: "internal" },
                { time: "18.30–20.00", title: "ถ่ายร้านลูกเจี๊ยบ", details: "คอนเทนต์: ศุกร์เย็นไฟย่าง, เพื่อนๆ นัดกินหมูกระทะ", client: "lookjeab" },
                { time: "20.00–20.30", title: "สรุปและเก็บอุปกรณ์", client: "internal" },
            ]
        },
        {
            date: "วันเสาร์ที่ 18 ตุลาคม 2568",
            tasks: [
                { time: "09.30–10.00", title: "ตรวจตารางถ่ายทำ / เตรียม SD Card", client: "internal" },
                { time: "10.00–12.00", title: "ถ่ายร้านอิ่มสุข", details: "คอนเทนต์: บรรยากาศครอบครัวมาทาน, ถ่ายเด็กๆ / คนสูงอายุ", client: "aimsook" },
                { time: "12.00–15.00", title: "ถ่ายร้านนฏกรเทเลคอม", details: "คอนเทนต์: ถ่ายรีวิวแกะกล่อง / แนะนำเคสและอุปกรณ์เสริม", client: "natakorn" },
                { time: "15.00–18.30", title: "ตัดต่อวิดีโอ “บรรยากาศวันหยุด”", client: "internal" },
                { time: "18.30–20.00", title: "ถ่ายร้านลูกเจี๊ยบ", details: "คอนเทนต์: เย็นวันเสาร์สุดคึกคัก, ถ่ายบรรยากาศโต๊ะใหญ่", client: "lookjeab" },
                { time: "20.00–20.30", title: "สรุปงาน / สำรองไฟล์", client: "internal" },
            ]
        },
        {
            date: "วันจันทร์ที่ 20 ตุลาคม 2568",
            tasks: [
                { time: "09.30–10.00", title: "เตรียมอุปกรณ์ / ตรวจนัดร้าน", client: "internal" },
                { time: "10.00–12.00", title: "ถ่ายร้านอิ่มสุข", details: "คอนเทนต์: ถ่ายพนักงานยิ้มแย้ม / แนะนำเมนูสุขภาพ", client: "aimsook" },
                { time: "12.00–15.00", title: "ถ่ายร้านนฏกรเทเลคอม", details: "คอนเทนต์: How to ทำความสะอาดมือถืออย่างปลอดภัย", client: "natakorn" },
                { time: "15.00–18.30", title: "ตัดต่อคลิป “เทคนิคมือถือประจำสัปดาห์”", client: "internal" },
                { time: "18.30–20.00", title: "ถ่ายร้านลูกเจี๊ยบ", details: "คอนเทนต์: เปิดร้านวันจันทร์, โปรลดชุดหมูกระทะ", client: "lookjeab" },
                { time: "20.00–20.30", title: "สรุปงาน / อัปโหลดไฟล์", client: "internal" },
            ]
        },
        {
            date: "วันอังคารที่ 21 ตุลาคม 2568",
            tasks: [
                { time: "09.30–10.00", title: "ตรวจเช็กแบตกล้อง / เตรียมขาตั้ง", client: "internal" },
                { time: "10.00–12.00", title: "ถ่ายร้านอิ่มสุข", details: "คอนเทนต์: เมนูพิเศษวันอังคาร, ถ่ายช่วงแสงสวยจากหน้าร้าน", client: "aimsook" },
                { time: "12.00–15.00", title: "ถ่ายร้านนฏกรเทเลคอม", details: "คอนเทนต์: รีวิวมือถือราคาประหยัด, พูดคุยพนักงานขาย", client: "natakorn" },
                { time: "15.00–18.30", title: "ตัดต่อคลิป “รีวิวมือถือ” / ทำกราฟิกโปรฯ", client: "internal" },
                { time: "18.30–20.00", title: "ถ่ายร้านลูกเจี๊ยบ", details: "คอนเทนต์: ถ่าย Reaction ลูกค้า, มุกสั้นๆ ตลกๆ", client: "lookjeab" },
                { time: "20.00–20.30", title: "สรุปงาน / ส่งไฟล์", client: "internal" },
            ]
        },
        {
            date: "วันพุธที่ 22 ตุลาคม 2568",
            tasks: [
                { time: "09.30–10.00", title: "ตรวจตารางถ่าย / เตรียมไฟ LED", client: "internal" },
                { time: "10.00–12.00", title: "ถ่ายร้านอิ่มสุข", details: "คอนเทนต์: ถ่าย Slow motion ตอนตักอาหาร, ถ่ายมือพนักงานบริการ", client: "aimsook" },
                { time: "12.00–15.00", title: "ถ่ายร้านนฏกรเทเลคอม", details: "คอนเทนต์: เบื้องหลังทีมซ่อมมือถือ / ลูกค้ารีวิวจริง", client: "natakorn" },
                { time: "15.00–18.30", title: "ตัดต่อคลิป “Behind the scene”", client: "internal" },
                { time: "18.30–20.00", title: "ถ่ายร้านลูกเจี๊ยบ", details: "คอนเทนต์: โปรหมูกระทะกลางสัปดาห์, ถ่ายลูกค้าโต๊ะใหญ่", client: "lookjeab" },
                { time: "20.00–20.30", title: "สรุปและเก็บไฟล์", client: "internal" },
            ]
        },
        {
            date: "วันพฤหัสบดีที่ 23 ตุลาคม 2568",
            tasks: [
                { time: "09.30–10.00", title: "เตรียมอุปกรณ์ / ตรวจเสียง", client: "internal" },
                { time: "10.00–12.00", title: "ถ่ายร้านอิ่มสุข", details: "คอนเทนต์: เบื้องหลังพ่อครัว, เมนูยอดฮิต, พนักงานคุยสนุก", client: "aimsook" },
                { time: "12.00–15.00", title: "ถ่ายร้านนฏกรเทเลคอม", details: "คอนเทนต์: โปรศุกร์สิ้นเดือน / รีวิวกล้องมือถือ", client: "natakorn" },
                { time: "15.00–18.30", title: "ตัดต่อคลิปและออกแบบภาพนิ่ง", client: "internal" },
                { time: "18.30–20.00", title: "ถ่ายร้านลูกเจี๊ยบ", details: "คอนเทนต์: Meme หมูกระทะตอนค่ำ, แสงควันเย็น", client: "lookjeab" },
                { time: "20.00–20.30", title: "สรุปงาน", client: "internal" },
            ]
        },
        {
            date: "วันศุกร์ที่ 24 ตุลาคม 2568",
            tasks: [
                { time: "09.30–10.00", title: "ตรวจกล้อง / เตรียมไฟ", client: "internal" },
                { time: "10.00–12.00", title: "ถ่ายร้านอิ่มสุข", details: "คอนเทนต์: เมนูแนะนำวันศุกร์, ถ่ายโต๊ะอาหารเต็ม", client: "aimsook" },
                { time: "12.00–15.00", title: "ถ่ายร้านนฏกรเทเลคอม", details: "คอนเทนต์: รีวิว iPhone, ถ่ายเทียบรุ่นกล้องมือถือ", client: "natakorn" },
                { time: "15.00–18.30", title: "ตัดต่อคลิป “อิ่มสุข x ความสุขวันศุกร์”", client: "internal" },
                { time: "18.30–20.00", title: "ถ่ายร้านลูกเจี๊ยบ", details: "คอนเทนต์: ศุกร์เย็นไฟย่าง, เพื่อนๆ นัดกินหมูกระทะ", client: "lookjeab" },
                { time: "20.00–20.30", title: "สรุปงาน", client: "internal" },
            ]
        },
        {
            date: "วันเสาร์ที่ 25 ตุลาคม 2568",
            tasks: [
                { time: "09.30–10.00", title: "ตรวจกล้อง / เตรียมอุปกรณ์", client: "internal" },
                { time: "10.00–12.00", title: "ถ่ายร้านอิ่มสุข", details: "คอนเทนต์: ถ่ายลูกค้ากลุ่มใหญ่, มุมครอบครัว", client: "aimsook" },
                { time: "12.00–15.00", title: "ถ่ายร้านนฏกรเทเลคอม", details: "คอนเทนต์: โปรมือถือสุดสัปดาห์, ถ่ายหน้าร้านคนเยอะ", client: "natakorn" },
                { time: "15.00–18.30", title: "ตัดต่อวิดีโอรวมสัปดาห์", client: "internal" },
                { time: "18.30–20.00", title: "ถ่ายร้านลูกเจี๊ยบ", details: "คอนเทนต์: เสาร์เย็นคึกคัก, ถ่ายเสียงจริงลูกค้า", client: "lookjeab" },
                { time: "20.00–20.30", title: "สรุปงาน / แบ็กอัปไฟล์", client: "internal" },
            ]
        },
        {
            date: "วันจันทร์ที่ 27 ตุลาคม 2568",
            tasks: [
                { time: "09.30–10.00", title: "เตรียมอุปกรณ์ / ตรวจนัดถ่าย", client: "internal" },
                { time: "10.00–12.00", title: "ถ่ายร้านอิ่มสุข", details: "คอนเทนต์: เมนูสุขภาพ, บรรยากาศเช้าเบาๆ", client: "aimsook" },
                { time: "12.00–15.00", title: "ถ่ายร้านนฏกรเทเลคอม", details: "คอนเทนต์: How to ทำความสะอาดมือถืออย่างปลอดภัย", client: "natakorn" },
                { time: "15.00–18.30", title: "ตัดต่อคลิป “มินิรีวิวมือถือ”", client: "internal" },
                { time: "18.30–20.00", title: "ถ่ายร้านลูกเจี๊ยบ", details: "คอนเทนต์: โปรต้นสัปดาห์, ถ่ายแสงไฟเย็น", client: "lookjeab" },
                { time: "20.00–20.30", title: "สรุปงาน", client: "internal" },
            ]
        },
        {
            date: "วันอังคารที่ 28 ตุลาคม 2568",
            tasks: [
                { time: "09.30–10.00", title: "ตรวจตาราง / เตรียมอุปกรณ์", client: "internal" },
                { time: "10.00–12.00", title: "ถ่ายร้านอิ่มสุข", details: "คอนเทนต์: เมนูพิเศษ / บรรยากาศช่วงเที่ยง", client: "aimsook" },
                { time: "12.00–15.00", title: "ถ่ายร้านนฏกรเทเลคอม", details: "คอนเทนต์: รีวิวมือถือรุ่นใหม่ล่าสุด / โปรท้ายเดือน", client: "natakorn" },
                { time: "15.00–18.30", title: "ตัดต่อคลิป “โปรสิ้นเดือน”", client: "internal" },
                { time: "18.30–20.00", title: "ถ่ายร้านลูกเจี๊ยบ", details: "คอนเทนต์: หมูกระทะเดือนใหม่ใกล้มา / ลูกค้าแน่นร้าน", client: "lookjeab" },
                { time: "20.00–20.30", title: "สรุปงาน", client: "internal" },
            ]
        },
        {
            date: "วันพุธที่ 29 ตุลาคม 2568",
            tasks: [
                { time: "09.30–10.00", title: "เตรียมอุปกรณ์ / ตรวจไฟ", client: "internal" },
                { time: "10.00–12.00", title: "ถ่ายร้านอิ่มสุข", details: "คอนเทนต์: ถ่ายเสียงจริงลูกค้า / เมนูยอดนิยม", client: "aimsook" },
                { time: "12.00–15.00", title: "ถ่ายร้านนฏกรเทเลคอม", details: "คอนเทนต์: โปรท้ายเดือน / พนักงานขายพูดในคลิป", client: "natakorn" },
                { time: "15.00–18.30", title: "ตัดต่อคลิป “รวมไฮไลต์เดือนตุลาคม”", client: "internal" },
                { time: "18.30–20.00", title: "ถ่ายร้านลูกเจี๊ยบ", details: "คอนเทนต์: ถ่าย Reaction ลูกค้า / โปรปิดเดือน", client: "lookjeab" },
                { time: "20.00–20.30", title: "สรุปและเก็บไฟล์", client: "internal" },
            ]
        },
        {
            date: "วันพฤหัสบดีที่ 30 ตุลาคม 2568",
            tasks: [
                { time: "09.30–10.00", title: "เตรียมอุปกรณ์ / ตรวจนัดร้าน", client: "internal" },
                { time: "10.00–12.00", title: "ถ่ายร้านอิ่มสุข", details: "คอนเทนต์: เมนูพิเศษสิ้นเดือน / ถ่ายมุมใหม่ของร้าน", client: "aimsook" },
                { time: "12.00–15.00", title: "ถ่ายร้านนฏกรเทเลคอม", details: "คอนเทนต์: โปร Halloween / รีวิวของตกแต่งร้าน", client: "natakorn" },
                { time: "15.00–18.30", title: "ตัดต่อคลิป “รวมโปรสิ้นเดือน”", client: "internal" },
                { time: "18.30–20.00", title: "ถ่ายร้านลูกเจี๊ยบ", details: "คอนเทนต์: บรรยากาศพิเศษสิ้นเดือน, มุกตลกส่งท้ายเดือน", client: "lookjeab" },
                { time: "20.00–20.30", title: "สรุปงาน", client: "internal" },
            ]
        },
        {
            date: "วันศุกร์ที่ 31 ตุลาคม 2568",
            tasks: [
                { time: "09.30–10.00", title: "ตรวจกล้อง / เตรียมสรุปเดือน", client: "internal" },
                { time: "10.00–12.00", title: "ถ่ายร้านอิ่มสุข", details: "คอนเทนต์: ถ่ายรวมทีม / ปิดท้ายเดือน / ขอบคุณลูกค้า", client: "aimsook" },
                { time: "12.00–15.00", title: "ถ่ายร้านนฏกรเทเลคอม", details: "คอนเทนต์: โปรเดือนพฤศจิกายน / สรุปยอดมือถือฮิต", client: "natakorn" },
                { time: "15.00–18.30", title: "ตัดต่อวิดีโอ “สรุปเดือนตุลาคม”", client: "internal" },
                { time: "18.30–20.00", title: "ถ่ายร้านลูกเจี๊ยบ", details: "คอนเทนต์: ปิดท้ายเดือนด้วยหมูกระทะ / บรรยากาศอบอุ่น", client: "lookjeab" },
                { time: "20.00–20.30", title: "สรุปงานทั้งเดือน / แบ็กอัปไฟล์ลง Drive", client: "internal" },
            ]
        },
    ];
    const clientTabs = [
        { key: 'all', name: 'งานทั้งหมด' },
        { key: 'aimsook', name: 'ร้านอิ่มสุข' },
        { key: 'natakorn', name: 'นฏกรเทเลคอม' },
        { key: 'lookjeab', name: 'ร้านลูกเจี๊ยบ' },
    ];
    const clientColors = {
        aimsook: {
            light: { bg: 'bg-yellow-50 hover:bg-yellow-100', text: 'text-orange-700', border: '#f97316' }
        },
        natakorn: {
            light: { bg: 'bg-blue-50 hover:bg-blue-100', text: 'text-blue-700', border: '#2563eb' }
        },
        lookjeab: {
            light: { bg: 'bg-pink-50 hover:bg-pink-100', text: 'text-red-700', border: '#ef4444' }
        },
        internal: {
            light: { bg: 'bg-gray-100 hover:bg-gray-200', text: 'text-gray-600', border: '#d1d5db' }
        }
    };
    let activeClient = localStorage.getItem('activeClient') || 'all';

    function setActiveClient(clientKey) {
        activeClient = clientKey;
        localStorage.setItem('activeClient', clientKey);
        renderTabs();
        renderSchedule();
    }
    function renderTabs() {
        const tabsContainer = document.getElementById('tabs-container');
        if (!tabsContainer) return;
        tabsContainer.innerHTML = '';
        clientTabs.forEach(tab => {
            const button = document.createElement('button');
            button.textContent = tab.name;
            button.setAttribute('data-client', tab.key);
            button.className = `
                tab-button
                px-3 py-2
                text-xs sm:text-base
                font-semibold
                rounded-lg
                shadow-md
                focus:outline-none
                focus:ring-2
                focus:ring-offset-2
                transition-all
                min-w-[80px] sm:min-w-[120px]
                max-w-[48vw] sm:max-w-none
                whitespace-nowrap
            `;
            button.onclick = () => setActiveClient(tab.key);
            if (tab.key === activeClient) {
                button.classList.add('bg-blue-600', 'text-white', 'focus:ring-blue-500', 'focus:ring-offset-white', 'ring-2');
                button.classList.remove('bg-transparent', 'text-gray-700');
            } else {
                button.classList.add('bg-transparent', 'text-gray-700', 'hover:bg-gray-100', 'focus:ring-blue-500', 'focus:ring-offset-white');
                button.classList.remove('bg-blue-600', 'text-white', 'ring-2');
            }
            tabsContainer.appendChild(button);
        });
    }
    function filterTasksByClient(tasks, clientKey) {
        if (clientKey === 'all') return tasks;
        return tasks.filter(task => task.client === clientKey);
    }
    let filterDate = '';
    let filterMonth = '';
    let filterYear = '';

    document.addEventListener('DOMContentLoaded', () => {
        activeClient = localStorage.getItem('activeClient') || 'all';
        renderTabs();
        renderSchedule();
        renderTodayTasks();
        renderPerformanceCards(); // เพิ่มเรียกฟังก์ชันนี้

        const closeBtn = document.getElementById('close-modal-btn');
        if (closeBtn) {
            closeBtn.onclick = closeNotifyModal;
        }
        // ปิด modal เมื่อคลิกนอก modal
        const modal = document.getElementById('notify-modal');
        if (modal) {
            modal.onclick = function(e) {
                if (e.target === modal) closeNotifyModal();
            };
        }
        // เพิ่ม event ให้ไอคอนแจ้งเตือน
        const notifyBtn = document.getElementById('header-notify-btn');
        if (notifyBtn) {
            notifyBtn.onclick = function() {
                const modal = document.getElementById('notify-modal');
                if (modal.classList.contains('hidden')) {
                    showTodayNotifyModal();
                } else {
                    closeNotifyModal();
                }
            };
        }
    });

    function renderSchedule() {
        const container = document.getElementById('schedule-container');
        const noTasksMessage = document.getElementById('no-tasks-message');
        if (!container || !noTasksMessage) return;
        container.innerHTML = '';

        // --- Add visual hint for horizontal scroll ---
        const hint = document.createElement('div');
        hint.className = 'w-full flex items-center justify-center mb-2';
        hint.innerHTML = `
            <div class="flex items-center gap-2 text-gray-500 text-sm animate-bounce-x">
                <svg class="w-5 h-5 text-blue-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/>
                </svg>
                <span>ปัดการ์ดไปด้านข้างเพื่อดูวันถัดไป</span>
                <svg class="w-5 h-5 text-blue-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/>
                </svg>
            </div>
        `;
        container.appendChild(hint);

        let totalTasksFound = 0;
        const daysPerLoad = 5;
        let currentIndex = 0;

        // ฟิลเตอร์วัน/เดือน/ปี
        let filteredSchedule = scheduleData;
        if (filterDate) {
            // date format: yyyy-mm-dd
            const [year, month, day] = filterDate.split('-');
            const buddhistYear = (parseInt(year) + 543).toString();
            const thaiMonth = new Date(filterDate).toLocaleString('th-TH', { month: 'long' });
            const pattern = `${parseInt(day)} ${thaiMonth} ${buddhistYear}`;
            filteredSchedule = filteredSchedule.filter(d => d.date.includes(pattern));
        }
        if (filterMonth) {
            filteredSchedule = filteredSchedule.filter(d => d.date.includes(filterMonth));
        }
        if (filterYear) {
            filteredSchedule = filteredSchedule.filter(d => d.date.includes(filterYear));
        }

        // --- Netflix style row ---
        const row = document.createElement('div');
        row.className = 'flex overflow-x-auto gap-6 pb-4 px-2 hide-scrollbar';
        row.style.scrollSnapType = 'x mandatory';
        row.style.scrollBehavior = 'smooth';

        function loadMoreDays() {
            let loaded = 0;
            while (currentIndex < filteredSchedule.length && loaded < daysPerLoad) {
                const day = filteredSchedule[currentIndex];
                const filteredTasks = filterTasksByClient(day.tasks, activeClient);
                if (filteredTasks.length > 0) {
                    totalTasksFound += filteredTasks.length;
                    const dayCard = document.createElement('div');
                    dayCard.className = 'bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200 transition duration-300 min-w-[260px] max-w-[90vw] sm:min-w-[320px] sm:max-w-[340px] flex-shrink-0 scroll-snap-align-start';
                    dayCard.style.scrollSnapAlign = 'start';
                    dayCard.style.minHeight = '220px';
                    const dayHeader = document.createElement('h2');
                    dayHeader.className = 'day-header text-lg font-semibold p-4 tracking-wide text-gray-800';
                    dayHeader.textContent = day.date;
                    dayCard.appendChild(dayHeader);
                    const tasksList = document.createElement('div');
                    tasksList.className = 'divide-y tasks-list divide-gray-200';
                    filteredTasks.forEach(task => {
                        const clientKey = task.client;
                        const themeColors = clientColors[clientKey] ? clientColors[clientKey].light : clientColors.internal.light;
                        const taskElement = document.createElement('div');
                        taskElement.className = `task-item ${themeColors.bg} border-l-4 p-3 flex items-start space-x-3 transition duration-200 cursor-pointer hover:ring-2 hover:ring-blue-400`;
                        taskElement.style.borderLeftColor = themeColors.border;
                        taskElement.onclick = () => showNotifyModal(task, day.date);
                        const timeElement = document.createElement('div');
                        timeElement.className = 'w-20 text-right font-bold text-xs sm:text-sm time-text flex-shrink-0 pt-0.5';
                        timeElement.textContent = task.time;
                        const contentElement = document.createElement('div');
                        contentElement.className = 'flex-grow';
                        const titleElement = document.createElement('p');
                        titleElement.className = `font-medium text-sm ${themeColors.text}`;
                        titleElement.textContent = task.title;
                        contentElement.appendChild(titleElement);
                        if (task.details) {
                            const detailsElement = document.createElement('p');
                            detailsElement.className = 'text-xs text-gray-500 italic mt-1 font-light';
                            detailsElement.textContent = `รายละเอียด: ${task.details}`;
                            contentElement.appendChild(detailsElement);
                        }
                        taskElement.appendChild(timeElement);
                        taskElement.appendChild(contentElement);
                        tasksList.appendChild(taskElement);
                    });
                    dayCard.appendChild(tasksList);
                    row.appendChild(dayCard);
                    loaded++;
                }
                currentIndex++;
            }
            container.appendChild(row);
            if (totalTasksFound === 0) {
                noTasksMessage.classList.remove('hidden');
            } else {
                noTasksMessage.classList.add('hidden');
            }
        }

        // โหลดครั้งแรก
        loadMoreDays();

        // ปรับ scroll snap ให้สมดุล: เลื่อนไปทีละการ์ด (snap)
        let isScrolling = false;
        row.addEventListener('scroll', function () {
            if (isScrolling) return;
            isScrolling = true;
            setTimeout(() => {
                // หาตำแหน่งการ์ดที่ใกล้ที่สุด
                const cards = Array.from(row.children);
                let closestCard = null;
                let minDiff = Infinity;
                const scrollLeft = row.scrollLeft;
                cards.forEach(card => {
                    const diff = Math.abs(card.offsetLeft - scrollLeft);
                    if (diff < minDiff) {
                        minDiff = diff;
                        closestCard = card;
                    }
                });
                if (closestCard) {
                    closestCard.scrollIntoView({ behavior: 'smooth', inline: 'start' });
                }
                isScrolling = false;
            }, 120);
        });

        // โหลดเพิ่มเมื่อ scroll แนวนอนใกล้ขวาสุด
        row.addEventListener('scroll', function lazyLoadScroll() {
            if (row.scrollLeft + row.clientWidth >= row.scrollWidth - 100) {
                if (currentIndex < filteredSchedule.length) {
                    loadMoreDays();
                }
            }
        });
    }
    // ปรับฟังก์ชันเปิด/ปิด modal ให้ใช้แบบ dropdown
    function showNotifyModal(task, dayDate) {
        const modal = document.getElementById('notify-modal');
        const modalContent = document.getElementById('modal-content');
        if (!modal || !modalContent) return;
        modalContent.innerHTML = `
            <div>
                <span class="font-bold text-gray-700">วันที่:</span>
                <span class="ml-2 text-blue-700">${dayDate}</span>
            </div>
            <div>
                <span class="font-bold text-gray-700">เวลา:</span>
                <span class="ml-2 text-blue-700">${task.time}</span>
            </div>
            <div>
                <span class="font-bold text-gray-700">หัวข้อ:</span>
                <span class="ml-2 text-green-700">${task.title}</span>
            </div>
            ${task.details ? `
            <div>
                <span class="font-bold text-gray-700">รายละเอียด:</span>
                <span class="ml-2 text-gray-800">${task.details}</span>
            </div>
            ` : ''}
        `;
        modal.classList.remove('hidden');
        setTimeout(() => { modal.classList.add('opacity-100'); }, 10);
    }
    function closeNotifyModal() {
        const modal = document.getElementById('notify-modal');
        if (modal) modal.classList.add('hidden');
    }
    document.addEventListener('DOMContentLoaded', () => {
        activeClient = localStorage.getItem('activeClient') || 'all';
        renderTabs();
        renderSchedule();
        renderTodayTasks();
        renderPerformanceCards(); // เพิ่มเรียกฟังก์ชันนี้

        const closeBtn = document.getElementById('close-modal-btn');
        if (closeBtn) {
            closeBtn.onclick = closeNotifyModal;
        }
        // ปิด modal เมื่อคลิกนอก modal
        const modal = document.getElementById('notify-modal');
        if (modal) {
            modal.onclick = function(e) {
                if (e.target === modal) closeNotifyModal();
            };
        }
        // เพิ่ม event ให้ไอคอนแจ้งเตือน
        const notifyBtn = document.getElementById('header-notify-btn');
        if (notifyBtn) {
            notifyBtn.onclick = function() {
                const modal = document.getElementById('notify-modal');
                if (modal.classList.contains('hidden')) {
                    showTodayNotifyModal();
                } else {
                    closeNotifyModal();
                }
            };
        }
    });
    // ฟังก์ชันเปิด modal แจ้งเตือน (ใช้กับ header)
    function showTodayNotifyModal() {
        const modal = document.getElementById('notify-modal');
        const modalContent = document.getElementById('modal-content');
        if (!modal || !modalContent) return;
        // เนื้อหาประกาศจากแอดมิน (แก้ไขตรงนี้ได้ตามต้องการ)
        const adminMessage = `
            <div class="text-center text-lg font-bold text-blue-700 mb-2">ประกาศ</div>
            <div class="text-base text-gray-800 mb-2">
                แจ้งข่าวสาร/หมายเหตุ :<br>
                - งานถ่ายทำอาจมีการเปลี่ยนแปลงตามหน้างาน<br>
                - กรุณาเตรียมความพร้อมของท่าน<br>
                - หากมีข้อสงสัยติดต่อ LINE หรือโทรที่เมนูด้านบน
            </div>
        `;
        modalContent.innerHTML = adminMessage;
        modal.classList.remove('hidden');
        setTimeout(() => { modal.classList.add('opacity-100'); }, 10);
    }

    // ฟังก์ชันแสดงงานวันนี้
    function renderTodayTasks() {
        const section = document.getElementById('today-tasks-section');
        if (!section) return;
        const today = new Date();
        // แปลงปี ค.ศ. เป็น พ.ศ.
        const buddhistYear = today.getFullYear() + 543;
        const day = today.getDate();
        const month = today.toLocaleString('th-TH', { month: 'long' });
        // สร้าง pattern สำหรับค้นหาใน scheduleData
        const todayPattern = `${day} ${month} ${buddhistYear}`;
        let foundDay = null;
        for (const entry of scheduleData) {
            if (entry.date.includes(todayPattern)) {
                foundDay = entry;
                break;
            }
        }
        if (!foundDay) {
            section.innerHTML = `
                <div class="bg-yellow-50 rounded-xl shadow p-6 text-center text-lg text-gray-700 border border-yellow-200">
                    วันนี้ไม่มีงานในตาราง
                </div>
            `;
        } else {
            let html = `
                <div class="bg-blue-50 rounded-xl shadow p-6 border border-blue-200">
                    <h2 class="text-2xl font-bold text-blue-700 mb-4">งานวันนี้ (${foundDay.date})</h2>
            `;
            foundDay.tasks.forEach(task => {
                html += `
                    <div class="mb-4 p-4 rounded-lg bg-white border border-gray-200 shadow flex flex-col sm:flex-row sm:items-center">
                        <div class="font-bold text-blue-700 w-24 sm:w-32 text-right flex-shrink-0">${task.time}</div>
                        <div class="flex-grow ml-0 sm:ml-6">
                            <div class="font-semibold text-green-700">${task.title}</div>
                            ${task.details ? `<div class="text-gray-800 text-sm mt-1">รายละเอียด: ${task.details}</div>` : ''}
                        </div>
                    </div>
                `;
            });
            html += `</div>`;
            section.innerHTML = html;
        }
    }

    // เพิ่มฟังก์ชันแสดงผลการดำเนินงานรายวัน (เฉพาะวันที่ผ่านมา)
    function renderPerformanceCards() {
        const container = document.getElementById('performance-cards');
        if (!container) return;
        container.innerHTML = '';

        const today = new Date();
        const buddhistYear = today.getFullYear() + 543;
        const month = today.toLocaleString('th-TH', { month: 'long' });
        const day = today.getDate();

        // ปรับรูปแบบปัญหาให้เป็น array เพื่อแสดงเป็นข้อๆ
        const issuesList = [
            ["อุปกรณ์กล้องมีปัญหา ต้องเปลี่ยนแบตระหว่างถ่ายทำ", "ไฟล์เสียงบางช่วงไม่ชัด ต้องแก้ไขในการตัดต่อ"],
            ["ทีมงานล่าช้าเล็กน้อยเนื่องจากฝนตก"],
            ["ร้านขอเปลี่ยนคิวถ่ายทำกะทันหัน", "อินเทอร์เน็ตช้า ส่งไฟล์งานล่าช้า"],
            [],
            ["ไม่มีปัญหา"]
        ];

        let totalDays = 0;
        let totalTasks = 0;
        let totalFinished = 0;

        scheduleData.forEach((entry, idx) => {
            const match = entry.date.match(/(\d{1,2}) ([ก-๙]+) (\d{4})/);
            if (!match) return;
            const entryDay = parseInt(match[1]);
            const entryMonth = match[2];
            const entryYear = parseInt(match[3]);
            if (
                entryYear < buddhistYear ||
                (entryYear === buddhistYear && entryMonth === month && entryDay < day)
            ) {
                totalDays++;
                const finishedTasks = entry.tasks.length;
                totalTasks += entry.tasks.length;
                totalFinished += finishedTasks;

                // เลือกปัญหาจาก issuesList แบบวนลูป
                const issues = issuesList[idx % issuesList.length];
                const hasIssue = issues.length > 0 && !(issues.length === 1 && issues[0] === "ไม่มีปัญหา");
                let issueColor = hasIssue ? "text-red-600" : "text-green-700";
                let statusText = hasIssue ? "มีปัญหา" : "เสร็จสมบูรณ์";
                let statusColor = hasIssue ? "bg-red-100 text-red-700" : "bg-green-100 text-green-700";

                container.innerHTML += `
                    <div class="rounded-xl border border-gray-200 shadow p-4 ${statusColor}">
                        <div class="flex items-center justify-between mb-2">
                            <span class="font-bold text-lg">${entry.date}</span>
                            <span class="px-3 py-1 rounded-full font-semibold ${statusColor}">${statusText}</span>
                        </div>
                        <div class="text-gray-700 mb-2">จำนวนงาน: ${finishedTasks} / ${entry.tasks.length}</div>
                        <ul class="list-disc pl-6 text-base text-gray-800 mb-2">
                            ${entry.tasks.map(task => `<li>${task.time} - ${task.title}</li>`).join('')}
                        </ul>
                        <div class="mt-2 font-kanit text-base ${issueColor}">
                            <span class="font-semibold">หมายเหตุ:</span>
                            ${issues.length === 0 ? `<span>ไม่มีปัญหา</span>` : `
                                <ul class="list-decimal pl-6 mt-1">
                                    ${issues.map(issue => `<li>${issue}</li>`).join('')}
                                </ul>
                            `}
                        </div>
                    </div>
                `;
            }
        });

        // สรุปภาพรวมด้านบน
        if (totalDays > 0) {
            const percent = Math.round((totalFinished / totalTasks) * 100);
            container.innerHTML = `
                <div class="mb-6 p-4 rounded-xl bg-green-200 text-green-900 font-kanit text-lg font-semibold flex flex-col sm:flex-row sm:items-center sm:justify-between">
                    <div>จำนวนวันที่ผ่านมา: ${totalDays} วัน</div>
                    <div>งานที่เสร็จ: ${totalFinished} / ${totalTasks} (${percent}%)</div>
                </div>
            ` + container.innerHTML;
        } else {
            container.innerHTML = `
                <div class="p-6 text-center text-gray-500 font-kanit">ยังไม่มีผลการดำเนินงานในช่วงเวลานี้</div>
            `;
        }
    }
</script>
</body>
</html>
